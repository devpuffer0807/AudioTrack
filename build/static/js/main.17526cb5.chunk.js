(this.webpackJsonpstudio=this.webpackJsonpstudio||[]).push([[0],{12:function(e){e.exports=JSON.parse('{"name":"My wonderful project name","description":"Project description, my first project, great stuff!","config":{"autosave":3,"loop":{"enabled":false,"start":3.456,"end":29.677},"snap":true,"grid":10,"zoom":5,"cursor":5},"tracks":[{"name":"track 1 - drums","description":"my track description, this is the drums track.","params":{"in":"realtek audio in","gain":-2,"pan":0,"solo":false,"mute":false,"rec":true,"frozen":true},"samples":[{"filename":"16_beat_blues.mp3","type":1,"url":"audio/piano-1.mp3","fullLength":372,"mime":"audio/mpeg","position":1.2,"start":80.4,"end":133},{"filename":"recording1.mp3","type":1,"url":"audio/guitar-1.mp3","fullLength":405,"mime":"audio/mpeg","position":13.3,"start":0,"end":80.153}],"effects":[{"name":"My effect name","description":"I thought to add a reverb, because I like it :-P","params":{"volume":45,"solo":false,"mute":false,"rec":true},"effect":{"type":"reverb","params":{"type":"church-hall","impulse_file":"my_chruch_cathedral.mp3","room_size":4,"pre-delay":12,"decay":120,"lowFreq":"100Hz","hiFreq":"4.5kHz","gate":"2.5kHz"}},"automations":[{"param":"volume","points":[{"time":0,"value":0},{"time":3.4,"value":0},{"time":5,"value":40},{"time":8.25,"value":60},{"time":120.1,"value":60},{"time":130,"value":10}]}]},{"name":"My Volume control","description":"simply the volume control","params":{"volume":45,"solo":false,"mute":false,"rec":true},"effect":{"type":"volume","params":{}},"automations":[{"param":"volume","points":[{"time":0,"value":80},{"time":240.4,"value":80},{"time":240.45,"value":79},{"time":240.455,"value":78},{"time":240.457,"value":77},{"time":240.46,"value":70},{"time":241,"value":0}]}]}],"frozen":{"filename":"track_1_-_drums.mp3","url":"https://mybrand.com/media/user12/track_1_-_drums.mp3","length":245.399,"mime":"audio/mpeg"}}]}')},180:function(e,t,n){},181:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(7),o=n.n(r),i=n(5),s=n(2),l=n(28),u=n(3),d=n(29),j=n.n(d),b=80,m=20,f=function(){var e=["#334155","#374151","#3F3F46","#44403C","#B91C1C","#B45309","#047857","#4338CA","#6D28D9","#BE185D"];return e[Math.floor(Math.random()*e.length)]},O={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",width:"500px",zIndex:"10"}},h=function(e,t){var n=b;return e&&e.duration>0?e.duration/t*n:0},p=function(e){var t=e.id,n=e.src,a=e.filename,c=e.isBlob,r=e.color,o=e.start_at;return{id:t||j()(),src:n,audioBufferRaw:new ArrayBuffer(0),decodedBufferRaw:[],createdBlobUrl:null,isBlob:c||!1,isPlaying:!1,isMuted:!1,volume:null,duration:null,audioElement:null,progress:0,color:r||f(),filename:a,loading:!0,start_at:o||0,waveformWidth:0}},v=function(e){var t=e.id,n=e.color,a=e.name,c=e.params,r=e.audioFiles;return{id:t||j()(),color:n||f(),name:a,params:c,audioFiles:r}},x=function(e,t){return e.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{audioFiles:e.audioFiles.map((function(e){return e.id===t.id?Object(s.a)(Object(s.a)({},e),t):e}))})}))},g=function(e,t){return e.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{audioFiles:e.audioFiles.map((function(e){return Object(s.a)(Object(s.a)({},e),{waveformWidth:h(e.audioElement,t)})}))})}))},w=function(e,t,n){return e.map((function(e){return e.audioFiles.map((function(e){t>=e.start_at&&t<=parseInt(e.audioElement.duration)+e.start_at?(e.audioElement.currentTime=t-e.start_at,n&&!e.isPlaying&&e.audioElement.play()):e.start_at>t?(e.audioElement.pause(),e.audioElement.currentTime=0):parseInt(e.audioElement.duration)+e.start_at<=t&&(e.audioElement.currentTime=e.audioElement.duration,e.isPlaying&&e.audioElement.pause())})),e}))},y=n(12),k=n(1),C=Object(a.createContext)(),M=function(e){var t=e.children,n=Object(a.useState)([]),c=Object(u.a)(n,2),r=c[0],o=c[1],d=Object(a.useState)({}),j=Object(u.a)(d,2),b=j[0],m=j[1],f=Object(a.useState)([]),O=Object(u.a)(f,2),h=O[0],x=O[1],g=Object(a.useState)([]),w=Object(u.a)(g,2),M=w[0],B=w[1];return Object(a.useEffect)((function(){var e,t=!1,n=Object(l.a)(y.tracks);try{for(n.s();!(e=n.n()).done;){var a,c=e.value,u=[],d=Object(l.a)(c.samples);try{for(d.s();!(a=d.n()).done;){var j=a.value;u.push(p({src:j.url,filename:j.filename,start_at:j.start}))}}catch(f){d.e(f)}finally{d.f()}o([].concat(Object(i.a)(r),[v({name:c.name,params:{gain:c.params.gain,solo:c.params.solo,mute:c.params.mute},audioFiles:u})])),t=t||c.params.solo}}catch(f){n.e(f)}finally{n.f()}m(Object(s.a)(Object(s.a)({},b),{},{name:y.name,secondsPerBox:y.config.grid,zoomBy:y.config.zoom,maxZoom:600,minZoom:5,currentPlayTime:5,headIsMoving:!1,snap:y.config.snap,solo:t,mute:!1,volume:1,historyFlag:!0}))}),[]),Object(k.jsx)(C.Provider,{value:{config:b,setConfig:m,tracks:r,setTracks:o,pastQueue:h,futureQueue:M,setPastQueue:x,setFutureQueue:B},children:t})},B={width:b*m},E={height:b,backgroundSize:b},N={height:25},T={height:25},P={height:25,backgroundSize:b+"px 10px"},L={width:b},S=function(e){var t=e.children;return Object(k.jsx)("div",{className:"timeline-scroll-container",children:Object(k.jsx)("div",{className:"timeline-scroll",style:B,children:t})})},I=function(e){var t=e.event,n=e.container,a=e.config,c=b,r=a.secondsPerBox,o=n.current.getBoundingClientRect();return(n.current.scrollLeft+t.clientX-o.left)/c*r},z=n(58),_=n.n(z),H=n(59),R=n.n(H),F=function(e){var t=e.children,n=(e.updateCurrentTime,Object(a.useState)(!1)),c=Object(u.a)(n,2);c[0],c[1],Object(a.useRef)();return Object(k.jsx)("div",{children:t})},A={height:b-5},W=function(e){var t=e.decodedBuffer,n=e.audioProgress,c=e.color,r=e.waveformWidth,o=e.id,i=Object(a.useState)(0),l=Object(u.a)(i,2),d=l[0],j=l[1];return Object(a.useEffect)((function(){if(t.length>0){var e=function(e){for(var t=e.buffer,n=e.waveformWidth,a=.02*b/100,c=30*parseInt(n/b),r=[],o=0,i=t.getChannelData(0),s=Math.floor(i.length/c),l=[],u=0;u<c;u++){for(var d=u*s+s,j=0,m=u*s;m<d;m++)i[m]>j&&(j=i[m]);var f=Math.abs(j);f>0&&l.push(f/2)}return l.map((function(e,t){o++;var n=100/l.length,c=120*e;return r.push(Object(k.jsx)("rect",{x:n*t+a/2,y:(100-c)/2,width:n-a,height:c},o)),e})),r}({buffer:t,waveformWidth:r});j(e)}}),[t,r]),Object(k.jsxs)("div",{className:"waveform",style:Object(s.a)(Object(s.a)({},A),{},{width:r,backgroundColor:c}),children:[Object(k.jsxs)("svg",{viewBox:"0 0 100 100",className:"waveform-container",style:{width:r},preserveAspectRatio:"none",children:[Object(k.jsx)("rect",{style:{clipPath:"url(#"+o+")",fill:"rgba(229, 231, 235,.4)"},x:"0",y:"0",height:"100",width:"100"}),Object(k.jsx)("rect",{style:{clipPath:"url(#"+o+")",fill:"#F3F4F6"},x:"0",y:"0",height:"100",width:n})]}),Object(k.jsx)("svg",{height:"0",width:"0",children:Object(k.jsx)("defs",{children:Object(k.jsx)("clipPath",{id:o,children:d})})})]})},D=n(60),Q=n.n(D),V=n(61),U=n.n(V),X=function(e){var t=e.audioFile,n=e.color,r=e.trackIndex,o=t.id,i=t.src,s=t.audioBufferRaw,l=t.decodedBufferRaw,d=t.createdBlobUrl,j=t.filename,b=t.audioElement,m=(t.volume,t.isMuted,t.loading),f=t.start_at,O=t.waveformWidth,p=Object(a.useContext)(C),v=p.tracks,g=p.setTracks,w=p.config,y=w.currentPlayTime,M=w.headIsMoving,B=w.secondsPerBox,E=Object(a.useState)(new ArrayBuffer(0)),N=Object(u.a)(E,2),T=N[0],P=N[1],L=Object(a.useState)(0),S=Object(u.a)(L,2),I=S[0],z=S[1],_=Object(a.useState)(null),H=Object(u.a)(_,2),A=H[0],D=H[1],V=Object(a.useState)([]),X=Object(u.a)(V,2),K=X[0],Z=X[1],q=c.a.createRef();Object(a.useEffect)((function(){if(s.byteLength>0)return D(d),void P(s);("string"===typeof i||i instanceof String)&&R()({url:i,responseType:"arraybuffer"}).then((function(e){var t=new Blob([e.data],{type:U.a.lookup(j)}),n=window.URL.createObjectURL(t);D(n),P(e.data)}))}),[i]);Object(a.useEffect)((function(){console.log("============",v[r].params.gain,A),function(){if(q.audioEl){if(void 0==window._CONTEXT){var e=window.AudioContext||window.webkitAudioContext;window._CONTEXT=new e}var t=window._CONTEXT.createGain();if(t.gain.value=Math.pow(10,v[r].params.gain/20),console.log("=====",t.gain.value),t.connect(window._CONTEXT.destination),q.audioEl)if(window.WEAK_MAP.has(q.audioEl.current)){var n=window.WEAK_MAP.get(q.audioEl.current);n.disconnect(),n.connect(t)}else{var a=window._CONTEXT.createMediaElementSource(q.audioEl.current);a.connect(t),t.connect(window._CONTEXT.destination),window.WEAK_MAP.set(q.audioEl.current,a)}}}()}),[v[r].params.gain]),Object(a.useEffect)((function(){l.length>0?Z(l):T.byteLength>0&&(new(window.AudioContext||window.webkitAudioContext)).decodeAudioData(T,(function(e){Z(e)}))}),[T]),Object(a.useEffect)((function(){K.length>0&&0===l.length&&g(x(v,{id:o,decodedBufferRaw:K}))}),[K]),Object(a.useEffect)((function(){m||b.currentTime==y-f||(b.currentTime=y-f)}),[f]),Object(a.useEffect)((function(){!m&&M&&y>=f&&y<=b.duration+f&&(t.isPlaying||(y>0&&0==b.currentTime&&(b.currentTime=y-f),b.play())),!M&&t.isPlaying&&b.pause()}),[M,y]);var J=function(e){z(e/b.duration*100)},G=function(e){g(x(v,{id:o,isPlaying:e}))};return Object(k.jsxs)("div",{className:"audioWavesContainer",onClick:function(e){return e.stopPropagation()},children:[A&&Object(k.jsx)(Q.a,{ref:function(e){q=e},src:A,muted:w.solo&&!v[r].params.solo||w.mute||!w.solo&&(v[r].params.mute||w.solo&&!v[r].params.solo),volume:w.volume,listenInterval:100,onListen:J,onPause:function(e){return G(!1)},onPlay:function(e){return G(!0)},onEnded:function(e){return G(!1)},onSeeked:function(e){return J(e.target.currentTime)},onLoadedMetadata:function(e){return t=e.target,void g(x(v,{id:o,audioElement:t,audioBufferRaw:T.byteLength>0&&0===s.byteLength?T.slice(0):s,loading:!1,waveformWidth:h(t,B),duration:t.duration,createdBlobUrl:A}));var t}}),b&&b.duration>0&&Object(k.jsx)(F,{updateCurrentTime:function(e){b.currentTime=e*b.duration},children:Object(k.jsx)(W,{decodedBuffer:K,audioProgress:I,color:n,waveformWidth:O,id:o})})]})},K=function(e){var t=e.color,n=e.audioFile,c=e.trackIndex,r=e.tracksCount,o=e.tracklinesContainerElem,l=Object(a.useContext)(C),d=l.tracks,j=l.setTracks,m=l.config,f=l.setConfig,O=n.id,h=n.start_at,p=n.waveformWidth,v=n.duration,g=(n.audioElement,n.audioBufferRaw,m.secondsPerBox),w=m.headIsMoving,y=b,M=Object(a.useState)(null),B=Object(u.a)(M,2),E=B[0],N=B[1],T=Object(a.useState)(!1),P=Object(u.a)(T,2),L=P[0],S=P[1],I=Object(a.useState)(!0),z=Object(u.a)(I,2),H=z[0],R=z[1],F=Object(a.useState)("inherit"),A=Object(u.a)(F,2),W=A[0],D=A[1],Q=Object(a.useState)({left:0,right:null,top:null,bottom:null}),V=Object(u.a)(Q,2),U=V[0],K=V[1],Z=Object(a.useRef)(null);Object(a.useEffect)((function(){D(H?H&&L?"pointer":"inherit":"not-allowed")}),[H,L]),Object(a.useEffect)((function(){var e=c,t=r-(c+1);N(h/g*y);var n=o.current.getBoundingClientRect(),a=Object(s.a)(Object(s.a)({},U),{},{right:n.width-p,top:e*y*-1,bottom:t*y});K(a)}),[p,r,h]);var q=function(e,t){L||S(!0),w&&f(Object(s.a)(Object(s.a)({},m),{},{headIsMoving:!1}));var n=Math.round(t.y/y),a=c+n,r=d.filter((function(e,t){return t===a}));if(r.length>0){var o=t.x/y*g,i=r[0].audioFiles.filter((function(e){return e.id!=O&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object(u.a)(e,2),a=n[0],c=n[1],r=Object(u.a)(t,2),o=r[0],i=r[1];return a>=o&&a<=i||c>=o&&c<=i||o>=a&&o<=c||i>=a&&i<=c}([o,o+v],[e.start_at,e.start_at+e.duration])})),l=0===i.length;H!==l&&R(l)}},J=function(e,t){if(!H||!L)return!1;var a=Math.round(t.y/y),r=m.snap?Math.round(t.x/y)*g:t.x/y*g;if(0===t.y||0===a){var o=x(d,{id:O,start_at:r});return j(o),!1}return j(function(e,t,n,a,c){var r=n+a,o=[];return e.map((function(e,a){return 0===o.length&&(o=e.audioFiles.filter((function(e){return e.id!==t.id}))),a==n?Object(s.a)(Object(s.a)({},e),{},{audioFiles:e.audioFiles.filter((function(e){return e.id!==t.id}))}):a==r?Object(s.a)(Object(s.a)({},e),{},{audioFiles:[].concat(Object(i.a)(e.audioFiles),[Object(s.a)(Object(s.a)({},t),{start_at:c})])}):e}))}(d,n,c,a,r)),!1};return null==E?Object(k.jsx)("span",{children:"loading"}):Object(k.jsx)(_.a,{nodeRef:Z,bounds:U,position:{x:E,y:2},onDrag:function(e,t){return q(0,t)},onStop:function(e,t){J(0,t),S(!1)},children:Object(k.jsx)("div",{ref:Z,className:"audioWavesDraggable",style:{cursor:W},children:Object(k.jsx)(X,{audioFile:n,color:t,trackIndex:c,setTracks:j})})})},Z=function(e){var t=e.timelineScrollContainerElem,n=Object(a.useContext)(C),c=n.tracks,r=n.config,o=n.setConfig,i=r.headIsMoving,l=Object(a.useRef)(),u=function(e){d(e)},d=function(e){var n=I({event:e,container:t,config:r});o(Object(s.a)(Object(s.a)({},r),{},{currentPlayTime:n})),w(c,n,i)};return Object(k.jsx)("div",{className:"tracklines",ref:l,children:c.map((function(e,t){return Object(k.jsx)("div",{className:"trackline",style:E,onClick:u,children:e.audioFiles.map((function(n){return Object(k.jsx)(K,{audioFile:n,color:e.color,trackIndex:t,tracksCount:c.length,tracklinesContainerElem:l},n.id)}))},t)}))})},q=function(){var e=Object(a.useContext)(C).config;return Object(k.jsx)("div",{className:"time-tracker",style:P,children:Object(i.a)(Array(m)).map((function(t,n){return Object(k.jsx)("div",{className:"time-value",style:L,children:(n*e.secondsPerBox).toString()},n)}))})},J=function(){var e=Object(a.useContext)(C),t=e.config,n=e.setConfig,c=e.pastQueue,r=e.setPastQueue;return Object(k.jsx)("div",{className:"main-player-name",children:Object(k.jsx)("input",{type:"text",defaultValue:t.name,onChange:function(e){r([].concat(Object(i.a)(c),[[Object(s.a)(Object(s.a)({},t),{type:"config"})]])),n(Object(s.a)(Object(s.a)({},t),{},{name:e.target.value}))},value:t.name})})},G=function(e){var t=e.muteHandler;return Object(k.jsx)("div",{className:"icon-btn-audio",onClick:t,children:Object(k.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Object(k.jsx)("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}),Object(k.jsx)("path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"})]})})},Y=function(e){var t=e.unmuteHandler;return Object(k.jsx)("div",{className:"icon-btn-audio",onClick:t,children:Object(k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:Object(k.jsx)("path",{d:"M11 5L6 9H2v6h4l5 4zM22 9l-6 6M16 9l6 6"})})})},$=function(){var e=Object(a.useContext)(C),t=e.config,n=e.setConfig;return Object(k.jsx)("div",{className:"main-player-volume",children:Object(k.jsx)("input",{type:"range",min:"0",max:"20",defaultValue:(20*t.volume).toString(),onChange:function(e){n(Object(s.a)(Object(s.a)({},t),{},{volume:parseFloat(e.target.value)/20}))}})})},ee=function(e){var t=e.playHandler;return Object(k.jsx)("div",{className:"main-player-play icon-btn",onClick:t,children:Object(k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 47.604 47.604",fill:"currentColor",children:Object(k.jsx)("g",{children:Object(k.jsx)("path",{d:"M43.331,21.237L7.233,0.397c-0.917-0.529-2.044-0.529-2.96,0c-0.916,0.528-1.48,1.505-1.48,2.563v41.684\r c0,1.058,0.564,2.035,1.48,2.563c0.458,0.268,0.969,0.397,1.48,0.397c0.511,0,1.022-0.133,1.48-0.397l36.098-20.84\r c0.918-0.529,1.479-1.506,1.479-2.564S44.247,21.767,43.331,21.237z"})})})})},te=function(e){var t=e.pauseHandler;return Object(k.jsx)("div",{className:"main-player-pause icon-btn",onClick:t,children:Object(k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 47.607 47.607",fill:"currentColor",children:Object(k.jsxs)("g",{children:[Object(k.jsx)("path",{d:"M17.991,40.976c0,3.662-2.969,6.631-6.631,6.631l0,0c-3.662,0-6.631-2.969-6.631-6.631V6.631C4.729,2.969,7.698,0,11.36,0\r l0,0c3.662,0,6.631,2.969,6.631,6.631V40.976z"}),Object(k.jsx)("path",{d:"M42.877,40.976c0,3.662-2.969,6.631-6.631,6.631l0,0c-3.662,0-6.631-2.969-6.631-6.631V6.631\r C29.616,2.969,32.585,0,36.246,0l0,0c3.662,0,6.631,2.969,6.631,6.631V40.976z"})]})})})},ne=function(){return Object(k.jsx)("div",{className:"main-player-stop icon-btn",children:Object(k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 47.604 47.604",fill:"currentColor",children:Object(k.jsx)("g",{children:Object(k.jsx)("path",{d:"M41.346,0H5.388C2.417,0,0,2.417,0,5.388v35.958c0,2.971,2.417,5.388,5.388,5.388h35.958c2.971,0,5.388-2.417,5.388-5.388V5.388C46.733,2.417,44.316,0,41.346,0z"})})})})},ae=function(){return Object(k.jsx)("div",{className:"main-player-record icon-btn",children:Object(k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 29.107 29.107",fill:"currentColor",children:Object(k.jsx)("g",{children:Object(k.jsx)("path",{d:"M14.554,0C6.561,0,0,6.562,0,14.552c0,7.996,6.561,14.555,14.554,14.555c7.996,0,14.553-6.559,14.553-14.555\r C29.106,6.562,22.55,0,14.554,0z"})})})})},ce=function(e){var t=e.backwardHandler;return Object(k.jsx)("div",{className:"main-player-fastforwardleft icon-btn",onClick:t,children:Object(k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 66.31 66.31",fill:"currentColor",children:Object(k.jsx)("g",{children:Object(k.jsx)("path",{d:"M1.609,30.368L29.19,14.443c0.996-0.574,2.222-0.574,3.218,0s1.609,1.639,1.609,2.787v13.072l27.466-15.859\r c0.997-0.574,2.222-0.574,3.218,0s1.609,1.639,1.609,2.787v31.849c0,1.15-0.613,2.213-1.609,2.787\r c-0.498,0.287-1.053,0.432-1.607,0.432s-1.111-0.145-1.609-0.432L34.017,36.009v13.07c0,1.15-0.613,2.213-1.609,2.787\r c-0.498,0.287-1.054,0.432-1.609,0.432s-1.111-0.145-1.608-0.432L1.609,35.942C0.613,35.368,0,34.303,0,33.155\r S0.613,30.942,1.609,30.368z"})})})})},re=function(e){var t=e.forwardHandler;return Object(k.jsx)("div",{className:"main-player-fastforwardright icon-btn",onClick:t,children:Object(k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 66.307 66.307",fill:"currentColor",children:Object(k.jsx)("g",{children:Object(k.jsx)("path",{d:"M64.702,30.366L37.12,14.442c-0.995-0.574-2.221-0.574-3.217,0s-1.609,1.639-1.609,2.787v13.072L4.827,14.442\r c-0.997-0.574-2.222-0.574-3.218,0S0,16.081,0,17.229v31.849c0,1.148,0.613,2.211,1.609,2.785c0.498,0.287,1.053,0.432,1.608,0.432\r s1.111-0.145,1.609-0.432l27.466-15.857v13.072c0,1.148,0.612,2.211,1.608,2.785c0.498,0.287,1.055,0.432,1.609,0.432\r s1.111-0.145,1.607-0.432l27.582-15.924c0.996-0.574,1.609-1.637,1.609-2.787C66.311,32.004,65.698,30.94,64.702,30.366z"})})})})},oe=function(){var e=Object(a.useContext)(C),t=(e.config,e.setConfig),n=(e.tracks,e.setTracks),c=e.pastQueue,r=e.futureQueue,o=e.setPastQueue,s=e.setFutureQueue;return Object(k.jsx)("div",{className:"icon-btn-undo",onClick:function(){if(console.log("===========",c),c.length>0)switch(c.at(-1)[0].type){case"config":t(c.at(-1)[0]),o(c.slice(0,-1)),s([].concat(Object(i.a)(r),Object(i.a)(c.slice(-1))));break;case"tracks":n(c.at(-1)),o(c.slice(0,-1)),s([].concat(Object(i.a)(r),Object(i.a)(c.slice(-1))))}},children:Object(k.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Object(k.jsx)("path",{d:"M10 16l-6-6 6-6"}),Object(k.jsx)("path",{d:"M20 21v-7a4 4 0 0 0-4-4H5"})]})})},ie=function(){var e=Object(a.useContext)(C),t=(e.config,e.setConfig),n=(e.tracks,e.setTracks),c=e.pastQueue,r=e.futureQueue,o=e.setPastQueue,s=e.setFutureQueue;return Object(k.jsx)("div",{className:"icon-btn-redo",onClick:function(){if(r.length>0)switch(r.at(-1)[0].type){case"config":t(r.at(-1)[0]),s(r.slice(0,-1)),o([].concat(Object(i.a)(c),Object(i.a)(r.slice(-1))));break;case"tracks":n(r.at(-1)),s(r.slice(0,-1)),o([].concat(Object(i.a)(c),Object(i.a)(r.slice(-1))))}},children:Object(k.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Object(k.jsx)("path",{d:"M14 16l6-6-6-6"}),Object(k.jsx)("path",{d:"M4 21v-7a4 4 0 0 1 4-4h11"})]})})},se=function(){var e=Object(a.useRef)(null);return Object(k.jsxs)("div",{className:"main-player-load",children:[Object(k.jsx)("input",{type:"file",ref:e,style:{display:"none"},onChange:function(e){e.target.files[0]}}),Object(k.jsx)("input",{type:"button",value:"Load",onClick:function(){e.current.click()}})]})},le=function(){return Object(k.jsx)("div",{className:"main-player-save",children:Object(k.jsx)("input",{type:"button",value:"Save"})})},ue=function(){var e=Object(a.useContext)(C),t=e.config,n=e.setConfig,c=e.tracks,r=(e.setTracks,Object(a.useCallback)((function(e){32===e.keyCode&&n(Object(s.a)(Object(s.a)({},t),{},{headIsMoving:!t.headIsMoving}))})));return Object(a.useEffect)((function(){return document.addEventListener("keydown",r),function(){document.removeEventListener("keydown",r)}}),[r]),Object(k.jsxs)("div",{className:"main-player",children:[Object(k.jsx)(J,{}),!t.mute&&Object(k.jsx)(G,{muteHandler:function(){n(Object(s.a)(Object(s.a)({},t),{},{mute:!0}))}}),t.mute&&Object(k.jsx)(Y,{unmuteHandler:function(){n(Object(s.a)(Object(s.a)({},t),{},{mute:!1}))}}),Object(k.jsx)($,{}),Object(k.jsx)(ae,{}),Object(k.jsx)(ne,{}),Object(k.jsx)(ce,{backwardHandler:function(){var e=Math.max(0,t.currentPlayTime-t.secondsPerBox);n(Object(s.a)(Object(s.a)({},t),{},{currentPlayTime:e})),w(c,e,t.headIsMoving)}}),!t.headIsMoving&&Object(k.jsx)(ee,{playHandler:function(){n(Object(s.a)(Object(s.a)({},t),{},{headIsMoving:!0}))}}),t.headIsMoving&&Object(k.jsx)(te,{pauseHandler:function(){n(Object(s.a)(Object(s.a)({},t),{},{headIsMoving:!1}))}}),Object(k.jsx)(re,{forwardHandler:function(){var e=Math.min(m*t.secondsPerBox,t.currentPlayTime+t.secondsPerBox);n(Object(s.a)(Object(s.a)({},t),{},{currentPlayTime:e})),w(c,e,t.headIsMoving)}}),Object(k.jsx)(oe,{}),Object(k.jsx)(ie,{}),Object(k.jsx)(se,{}),Object(k.jsx)(le,{})]})},de=function(e){var t=e.timelineScrollContainerElem,n=Object(a.useContext)(C),c=n.tracks,r=n.config,o=n.setConfig,i=r.secondsPerBox,l=r.currentPlayTime,d=r.headIsMoving,j=b,m=Object(a.useState)(!1),f=Object(u.a)(m,2),O=f[0],h=f[1],p=Object(a.useState)(0),v=Object(u.a)(p,2),x=v[0],g=v[1],y=i/100;!function(e,t){var n=Object(a.useRef)();Object(a.useEffect)((function(){n.current=e}),[e]),Object(a.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){!O&&d&&(console.log(y),o(Object(s.a)(Object(s.a)({},r),{},{currentPlayTime:l+y})))}),1e3*y),Object(a.useEffect)((function(){g(l/i*j-10)}),[l,i]);var M=function(e){var n=I({event:e,container:t,config:r});o(Object(s.a)(Object(s.a)({},r),{},{currentPlayTime:n})),w(c,n,d)},B=function(e){M(e),h(!0)},E=function(e){M(e)},T={playHead:{transform:"translate(".concat(x,"px")},playHeadTop:{width:20,height:15},playHeadArrow:{borderWidth:10}};return Object(k.jsxs)("div",{className:"playHead-container",children:[Object(k.jsx)("div",{className:"playHead-top-line",style:N,onMouseDown:B,onDrag:E}),Object(k.jsxs)("div",{style:T.playHead,className:"playHead",onMouseDown:B,onDrag:E,children:[Object(k.jsx)("div",{className:"playHead-top",style:T.playHeadTop}),Object(k.jsx)("div",{className:"playHead-head-arrow",style:T.playHeadArrow}),Object(k.jsx)("div",{className:"playHead-line"})]})]})},je=n(68),be={display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"top"},me={flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",borderWidth:2,borderRadius:2,borderColor:"#eeeeee",borderStyle:"dashed",backgroundColor:"#fafafa",color:"#bdbdbd",outline:"none",transition:"border .24s ease-in-out",marginTop:"20px",marginLeft:"auto",marginRight:"auto",maxWidth:"400px"},fe={flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",borderWidth:2,borderRadius:2,borderColor:"#eeeeee",borderStyle:"dashed",backgroundColor:"#fafafa",color:"#bdbdbd",outline:"none",transition:"border .24s ease-in-out",marginTop:"10px",marginLeft:"auto",marginRight:"auto",width:"240px",height:"80px",justifyContent:"center"},Oe={borderColor:"#2196f3"},he={borderColor:"#00e676"},pe={borderColor:"#ff1744"},ve=function(){var e=Object(a.useContext)(C),t=e.tracks,n=e.setTracks,c=Object(je.a)({accept:"audio/*",onDrop:function(e){var a=e.map((function(e){var t=p({src:URL.createObjectURL(e),filename:e.name,isBlob:!0});return v({name:"",params:{gain:0,solo:!1,mute:!1},audioFiles:[t]})}));n([].concat(Object(i.a)(t),Object(i.a)(a)))}}),r=c.getRootProps,o=c.getInputProps,l=c.isDragActive,u=c.isDragAccept,d=c.isDragReject,j=Object(a.useMemo)((function(){return Object(s.a)(Object(s.a)(Object(s.a)(Object(s.a)({},me),l?Oe:{}),u?he:{}),d?pe:{})}),[l,d,u]),b=Object(a.useMemo)((function(){return Object(s.a)(Object(s.a)(Object(s.a)(Object(s.a)({},fe),l?Oe:{}),u?he:{}),d?pe:{})}),[l,d,u]);return Object(k.jsxs)("div",{className:"uploader-container",style:be,children:[Object(k.jsx)("div",Object(s.a)(Object(s.a)({className:"track-container"},r({style1:b})),{},{children:Object(k.jsxs)("div",{style:fe,children:[Object(k.jsx)("input",Object(s.a)({},o())),Object(k.jsxs)("div",{className:"track-placeholder",children:[Object(k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",width:15,height:15,children:Object(k.jsx)("path",{fillRule:"evenodd",d:"M11 11v-11h1v11h11v1h-11v11h-1v-11h-11v-1h11z",clipRule:"evenodd"})}),Object(k.jsx)("p",{children:"Add New Track"})]})]})})),Object(k.jsxs)("div",Object(s.a)(Object(s.a)({},r({style:j})),{},{children:[Object(k.jsx)("input",Object(s.a)({},o())),Object(k.jsxs)("div",{className:"uploader-placeholder",children:[Object(k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",width:25,height:25,children:Object(k.jsx)("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),Object(k.jsx)("p",{children:"Upload Audio file"})]})]}))]})},xe={height:b,width:3*b},ge={width:2.3*b,marginLeft:10,marginRight:5,marginTop:5},we="#B45309",ye="#d2d2d2",ke=n(67),Ce=(n(170),function(e){var t=e.track,n=Object(a.useState)(t.params.gain),c=Object(u.a)(n,2),r=c[0],o=(c[1],Object(a.useContext)(C)),l=o.config,d=o.setConfig,j=Object(a.useContext)(C),b=j.tracks,m=j.setTracks,f=Object(a.useContext)(C),O=f.pastQueue,h=f.setPastQueue,p={"-50":"-\u1011","-36":"-36","-24":"-24","-18":"-18","-12":"-12","-6":"-6",0:Object(k.jsx)("strong",{children:"0"}),6:6},v=function(e){var n=b.map((function(n){return t.id===n.id?Object(s.a)(Object(s.a)({},n),{},{params:Object(s.a)(Object(s.a)({},t.params),{},{gain:parseInt(e)})}):n})),a=[b];a[0][0].type="tracks",h([].concat(Object(i.a)(O),a)),m(n)};return Object(k.jsxs)("div",{className:"control-track",style:xe,children:[Object(k.jsx)("div",{className:"track-name",children:Object(k.jsx)("input",{type:"text",value:t.name,onChange:function(e){var n=b.map((function(n){return t.id===n.id?Object(s.a)(Object(s.a)({},n),{},{name:e.target.value}):n}));m(n)}})}),Object(k.jsxs)("div",{className:"track-solo-mute",children:[Object(k.jsx)("input",{type:"button",value:"S",style:{backgroundColor:t.params.solo?"#047857":ye},onClick:function(){return function(e){var n=!1,a=b.map((function(e){return n||(n=t.id===e.id?!e.params.solo:e.params.solo),t.id===e.id?Object(s.a)(Object(s.a)({},e),{},{params:Object(s.a)(Object(s.a)({},t.params),{},{solo:!e.params.solo})}):e}));m(a),d(Object(s.a)(Object(s.a)({},l),{},{solo:n}))}()}}),Object(k.jsx)("input",{type:"button",value:"M",style:{backgroundColor:l.solo?t.params.solo?ye:we:t.params.mute?we:ye},onClick:function(){if(!l.solo||t.params.solo){var e=!1,n=b.map((function(n){return t.id===n.id&&(e=e||n.params.solo),t.id===n.id?Object(s.a)(Object(s.a)({},n),{},{params:Object(s.a)(Object(s.a)({},t.params),{},{solo:!1,mute:!!t.params.solo||!n.params.mute})}):n}));m(n),d(Object(s.a)(Object(s.a)({},l),{},{solo:e}))}}})]}),Object(k.jsxs)("div",{className:"track-gain",children:[Object(k.jsx)(ke.a,{min:-50,max:6,marks:p,step:1,defaultValue:r,value:t.params.gain,style:ge,onChange:v}),Object(k.jsx)("input",{type:"number",value:t.params.gain,onChange:function(e){v(e.target.value)},max:6})]})]})}),Me=function(){var e=Object(a.useContext)(C),t=e.tracks,n=e.setTracks,c=e.config,r=e.setConfig,o=c.secondsPerBox,i=c.zoomBy,l=(c.maxZoom,c.minZoom),u=(c.headIsMoving,function(e){r(Object(s.a)(Object(s.a)({},c),{},{zoomBy:parseInt(e.target.value)}))});return Object(k.jsxs)("div",{className:"zoom-container",children:[Object(k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",className:"snap-setting",viewBox:"0 0 24 24",fill:c.snap?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",onClick:function(){var e=!c.snap;r(Object(s.a)(Object(s.a)({},c),{},{snap:e}))},children:Object(k.jsx)("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})}),Object(k.jsxs)("div",{className:"zoom-setting-container",children:[Object(k.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",className:"zoom-setting",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",onClick:function(){document.getElementById("zoomSettingBar").classList.contains("display-none")?document.getElementById("zoomSettingBar").classList.remove("display-none"):document.getElementById("zoomSettingBar").classList.add("display-none")},children:[Object(k.jsx)("circle",{cx:"12",cy:"12",r:"3"}),Object(k.jsx)("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83\r 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1\r 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65\r 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65\r 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65\r 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83\r 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1\r 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2\r 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0\r 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),Object(k.jsx)("div",{id:"zoomSettingBar",className:"zoom-setting-bar display-none",children:Object(k.jsx)("ul",{children:[{step:2,text:"2 seconds"},{step:5,text:"5 seconds"},{step:10,text:"10 seconds"},{step:20,text:"20 seconds"},{step:30,text:"30 seconds"},{step:60,text:"1 minute"},{step:300,text:"5 minutes"},{step:900,text:"15 minutes"}].map((function(e){return Object(k.jsxs)("li",{children:[Object(k.jsx)("input",{type:"radio",name:"zoomBy",value:e.step,onClick:u,defaultChecked:c.zoomBy===e.step}),Object(k.jsx)("span",{children:e.text})]},e.step)}))})})]}),Object(k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"zoom-in ".concat(o-i<=0?"disabled":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",onClick:function(){o-i>=l&&(n(g(t,o-i)),r(Object(s.a)(Object(s.a)({},c),{},{secondsPerBox:o-i,headIsMoving:!1})))},children:Object(k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})}),Object(k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"zoom-out",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",onClick:function(){n(g(t,o+i)),r(Object(s.a)(Object(s.a)({},c),{},{secondsPerBox:o+i,headIsMoving:!1}))},children:Object(k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM13 10H7"})})]})},Be=n(31),Ee=n.n(Be),Ne=function(){var e=Object(a.useContext)(C),t=e.tracks,n=e.setTracks,c=Object(a.useState)(!1),r=Object(u.a)(c,2),o=r[0],s=r[1],l=Object(a.useState)(!1),d=Object(u.a)(l,2),j=(d[0],d[1]),b=Object(a.useState)([]),m=Object(u.a)(b,2),f=m[0],h=m[1],p=Object(a.useState)(null),x=Object(u.a)(p,2),g=(x[0],x[1]);return Object(a.useEffect)((function(){fetch("https://api.example.com/items").then((function(e){return e.json()})).then((function(e){j(!0),h(e)}),(function(e){j(!0),g(e)}))}),[]),Object(a.useEffect)((function(){Ee.a.setAppElement("body")}),[]),Object(k.jsxs)("div",{className:"import-from-server",children:[Object(k.jsx)("input",{type:"button",value:"Import audio from list of files on server",onClick:function(){s(!0)}}),Object(k.jsxs)(Ee.a,{isOpen:o,onAfterOpen:function(){},onRequestClose:function(){s(!1)},style:O,contentLabel:"Import audio from server",children:[Object(k.jsx)("h1",{children:"The list of files from server"}),Object(k.jsx)("ul",{children:f.map((function(e,a){return Object(k.jsx)("li",{onClick:function(){return function(e){n([].concat(Object(i.a)(t),[v({audioFiles:[e]})]))}(e)},children:e.filename},a)}))})]})]})},Te=function(){var e=Object(a.useContext)(C).tracks,t=Object(a.useRef)();return Object(a.useEffect)((function(){console.log(e)})),Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(ue,{}),Object(k.jsx)(Me,{}),Object(k.jsxs)("div",{className:"timeline-controls-container",children:[Object(k.jsxs)("div",{className:"controls-container",children:[Object(k.jsx)("div",{className:"tmp_tracker",style:T}),e.map((function(e){return Object(k.jsx)(Ce,{track:e},e.id)}))]}),Object(k.jsx)("div",{className:"timelineScrollContainer",ref:t,children:Object(k.jsxs)(S,{children:[Object(k.jsx)(q,{}),Object(k.jsx)(de,{timelineScrollContainerElem:t}),Object(k.jsx)(Z,{timelineScrollContainerElem:t})]})})]}),Object(k.jsx)(ve,{}),Object(k.jsx)(Ne,{})]})},Pe=function(){return Object(k.jsx)("div",{className:"timeline-container",children:Object(k.jsx)(Te,{})})};n(180);window.WEAK_MAP=new WeakMap;var Le=function(){return Object(k.jsx)(M,{children:Object(k.jsx)(Pe,{})})};o.a.render(Object(k.jsx)(Le,{}),document.getElementById("root"))}},[[181,1,2]]]);
//# sourceMappingURL=main.17526cb5.chunk.js.map