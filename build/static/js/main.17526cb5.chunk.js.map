{"version":3,"sources":["config.js","helpers/calcWaveFormWidth.js","States/States.js","Context/PlayerContext.js","timeline/timelineStyle.js","timeline/TimelineScroll.js","helpers/positionToTime.js","player/WaveformPlayer.js","player/playerStyle.js","player/Waveform/Waveform.js","player/Waveform/Waveform.service.js","player/Waves.js","timeline/DraggableWave.js","helpers/rangeIntersetct.js","timeline/Tracklines.js","timeline/TimelineTracker.js","Controls/MainPlayer/ProjectName.js","Controls/MainPlayer/AudioBtn.js","Controls/MainPlayer/AudioMuteBtn.js","Controls/MainPlayer/AudioVolume.js","Controls/MainPlayer/PlayBtn.js","Controls/MainPlayer/PauseBtn.js","Controls/MainPlayer/StopBtn.js","Controls/MainPlayer/RecordBtn.js","Controls/MainPlayer/FastForwardLeftBtn.js","Controls/MainPlayer/FastForwardRightBtn.js","Controls/MainPlayer/Undo.js","Controls/MainPlayer/Redo.js","Controls/MainPlayer/Load.js","Controls/MainPlayer/Save.js","Controls/MainPlayer/MainPlayer.js","Controls/PlayHead.js","helpers/useInterval.js","uploader/uploaderStyle.js","uploader/Uploader.js","Controls/controlsStyle.js","Controls/Controls.js","Controls/Zoom.js","importer/ImportFromServer.js","timeline/Timeline.js","TimelineDemo.js","App.js","index.js"],"names":["timelineConfig","randomColor","colors","Math","floor","random","length","modalStyles","content","top","left","right","bottom","marginRight","transform","width","zIndex","audioElement","secondsPerBox","timelineBoxSize","duration","PlayerState","id","src","filename","isBlob","color","start_at","uuid","audioBufferRaw","ArrayBuffer","decodedBufferRaw","createdBlobUrl","isPlaying","isMuted","volume","progress","loading","waveformWidth","Track","name","params","audioFiles","updateAudio","tracks","audioObj","map","track","audioFile","updateWaveFormWidth","calcWaveFormWidth","updateCurrentAudioTime","currentTime","headIsMoving","parseInt","play","pause","PlayerContext","createContext","PlayerContextProvider","children","useState","setTracks","config","setConfig","pastQueue","setPastQueue","futureQueue","setFutureQueue","useEffect","solo","Json","dummyAudios","samples","sample","push","url","start","gain","mute","grid","zoomBy","zoom","maxZoom","minZoom","currentPlayTime","snap","historyFlag","Provider","value","timelineScrollStyle","timelineTracklineStyle","height","backgroundSize","playHeadTopStyle","topTmpTrackerStyle","timelineTrackerStyle","timelineTimeValueStyle","className","style","event","container","bcr","current","getBoundingClientRect","scrollLeft","clientX","updateCurrentTime","useRef","waveformStyle","decodedBuffer","audioProgress","waveformMasks","setWaveformMasks","waveformMask","buffer","SPACE_BETWEEN_BARS","NUMBER_OF_BUCKETS","svgRects","ukey","decodedAudioData","getChannelData","bucketDataSize","buckets","i","endingPoint","max","j","size","abs","bucket","bucketSVGWidth","bucketSVGHeight","x","y","waveformService","backgroundColor","viewBox","preserveAspectRatio","clipPath","fill","trackIndex","useContext","audioBuffer","setAudioBuffer","setAudioProgress","blobUrl","setBlobUrl","setDecodedBuffer","rap","React","createRef","byteLength","String","axios","responseType","then","response","blob","Blob","data","type","mime","lookup","window","URL","createObjectURL","console","log","audioEl","undefined","_CONTEXT","AudioContext","webkitAudioContext","gainNode","createGain","pow","connect","destination","WEAK_MAP","has","source","get","disconnect","createMediaElementSource","set","drumPlay","decodeAudioData","handleAudioListener","setIsPlaying","onClick","e","stopPropagation","ref","element","muted","listenInterval","onListen","onPause","onPlay","onEnded","onSeeked","target","onLoadedMetadata","meta","elem","slice","WaveformPlayer","position","Waveform","tracksCount","tracklinesContainerElem","translateX","setTranslateX","isDragging","setIsDragging","isAllowedToDrop","setIsAllowedToDrop","cssCursor","setCssCursor","dragBoundaries","setDragBoundaries","draggableNodeRef","previous_tracks_count","next_tracks_count","parentNode","bond","dragHandler","node","move_by_index","round","new_track_index","darggingOver","filter","item","index","calculated_start_at","intersection","arr1","arr2","min1","max1","min2","max2","rangeIntersetct","allowedToDrop","dropHandler","upAudio","curren_track_index","audioFileByID","moveAudioToOtherTrack","nodeRef","bounds","onDrag","onStop","cursor","Waves","timelineScrollContainerElem","handleClickOnEmptySpace","updateCursorPosition","time","positionToTime","DraggableWave","Array","toString","defaultValue","onChange","muteHandler","xmlns","stroke","strokeWidth","strokeLinecap","strokeLinejoin","points","d","unmuteHandler","min","parseFloat","playHandler","pauseHandler","backwardHandler","forwardHandler","at","fileInput","display","files","click","getKeyEvent","useCallback","keyCode","document","addEventListener","removeEventListener","ProjectName","AudioBtn","AudioMuteBtn","AudioVolume","RecordBtn","StopBtn","FastForwardLeftBtn","PlayBtn","PauseBtn","FastForwardRightBtn","Undo","Redo","Load","Save","mouseDrag","setMouseDrag","secondsRefreshValue","callback","delay","savedCallback","setInterval","clearInterval","useInterval","updatePosition","onMouseDownHandler","onMouseDragHandler","styles","playHead","playHeadTop","arrowWidth","playHeadArrow","borderWidth","onMouseDown","containerStyle","flexDirection","justifyContent","alignItems","baseStyle","flex","padding","borderRadius","borderColor","borderStyle","outline","transition","marginTop","marginLeft","maxWidth","baseStyle1","activeStyle","acceptStyle","rejectStyle","useDropzone","accept","onDrop","acceptedFiles","newTracks","file","getRootProps","getInputProps","isDragActive","isDragAccept","isDragReject","useMemo","style1","fillRule","clipRule","controlsTrackStyle","sliderTracksStyle","muteColor","disableColor","marks","getNewTrack","newTrack","trackItem","tempTracks","isSoloClicked","soloHandler","step","stepHandler","$event","getElementById","classList","contains","remove","add","cx","cy","r","text","defaultChecked","isOpen","setIsOpen","setIsLoaded","setFiles","setError","fetch","res","json","result","error","Modal","setAppElement","onAfterOpen","onRequestClose","contentLabel","addAudioFile","MainPlayer","Zoom","Controls","TimelineScroll","TimelineTracker","PlayHead","Tracklines","Uploader","ImportFromServer","Timeline","WeakMap","App","TimelineDemo","ReactDOM","render"],"mappings":"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","file":"static/js/main.17526cb5.chunk.js","sourcesContent":["export const timelineConfig = {\r\n    timelineBoxSize: 80,//px\r\n    timelineMinBoxNumbers: 20,\r\n}\r\n\r\nexport const playerConfig = {\r\n    NUMBER_OF_BUCKETS: 800,\r\n    SPACE_BETWEEN_BARS: (seconds) => {\r\n        return timelineConfig.timelineBoxSize / seconds / 100\r\n    },\r\n}\r\n\r\nexport const randomColor = () => {\r\n    let colors = [\r\n        '#334155',\r\n        '#374151',\r\n        '#3F3F46',\r\n        '#44403C',\r\n        '#B91C1C',\r\n        '#B45309',\r\n        '#047857',\r\n        '#4338CA',\r\n        '#6D28D9',\r\n        '#BE185D',\r\n    ]\r\n\r\n    return colors[Math.floor(Math.random() * colors.length)]\r\n}\r\n\r\nexport const modalStyles = {\r\n    content: {\r\n        top: '50%',\r\n        left: '50%',\r\n        right: 'auto',\r\n        bottom: 'auto',\r\n        marginRight: '-50%',\r\n        transform: 'translate(-50%, -50%)',\r\n        width: '500px',\r\n        zIndex: '10'\r\n    }\r\n}\r\n","import { timelineConfig } from \"../config\";\r\n\r\nexport default (audioElement, secondsPerBox) => {\r\n    const { timelineBoxSize } = timelineConfig;\r\n    return audioElement && audioElement.duration > 0\r\n        ? (audioElement.duration / secondsPerBox) * timelineBoxSize\r\n        : 0;\r\n};\r\n","import uuid from 'react-uuid'\r\nimport { randomColor } from '../config'\r\nimport calcWaveFormWidth from '../helpers/calcWaveFormWidth'\r\n\r\nconst PlayerState = ({id, src, filename, isBlob, color, start_at}) => {\r\n  return {\r\n    id: id ? id : uuid(),\r\n    src: src,\r\n    audioBufferRaw: new ArrayBuffer(0),\r\n    decodedBufferRaw: [],\r\n    createdBlobUrl: null,\r\n    isBlob: isBlob ? isBlob : false,\r\n    isPlaying: false,\r\n    isMuted: false,\r\n    volume: null,\r\n    duration: null,\r\n\r\n    audioElement: null,\r\n    progress: 0,\r\n    color: color ? color : randomColor(),\r\n    filename: filename,\r\n    loading: true,\r\n    start_at: start_at ? start_at : 0,\r\n    waveformWidth: 0,\r\n  }\r\n}\r\n\r\nexport default PlayerState\r\n\r\nexport const Track = ({id, color, name, params, audioFiles}) => {\r\n  return {\r\n    id: id ? id : uuid(),\r\n    color: color ? color : randomColor(),\r\n    name: name,\r\n    params: params,\r\n    audioFiles: audioFiles,\r\n  }\r\n}\r\n\r\nexport const updateAudio = (tracks, audioObj) => {\r\n  // console.log(\"currentObj\", audioObj);\r\n  let newAudioFileObj = null\r\n  let newTracksObj = tracks.map((track) => {\r\n    return {\r\n      ...track,\r\n      audioFiles: track.audioFiles.map((audioFile) => {\r\n        return audioFile.id === audioObj.id\r\n          ? newAudioFileObj = {\r\n            ...audioFile,\r\n            ...audioObj,\r\n          }\r\n          : audioFile\r\n      }),\r\n    }\r\n  })\r\n  // console.log(\"newObj\", newAudioFileObj);\r\n  return newTracksObj\r\n}\r\n\r\nexport const updateWaveFormWidth = (tracks, secondsPerBox) => {\r\n  return tracks.map((track) => {\r\n    return {\r\n      ...track,\r\n      audioFiles: track.audioFiles.map((audioFile) => {\r\n        return {\r\n          ...audioFile,\r\n          ...{\r\n            waveformWidth: calcWaveFormWidth(\r\n              audioFile.audioElement,\r\n              secondsPerBox\r\n            )\r\n          },\r\n        }\r\n      }),\r\n    }\r\n  })\r\n}\r\n\r\nexport const moveAudioToOtherTrack = (tracks, audioObj, curren_track_index, move_by_index, start_at) => {\r\n  const new_track_index = curren_track_index + move_by_index\r\n  let audioFileByID = []\r\n  // console.log(audioFileByID);\r\n  return tracks.map((track, index) => {\r\n    if (audioFileByID.length === 0) {\r\n      audioFileByID = track.audioFiles.filter((item) => item.id !== audioObj.id)\r\n    }\r\n    // console.log(audioFileByID);\r\n    if (index == curren_track_index) {\r\n      return {\r\n        ...track,\r\n        audioFiles: track.audioFiles.filter((item) => item.id !== audioObj.id),\r\n      }\r\n    }\r\n    if (index == new_track_index) {\r\n      return {\r\n        ...track,\r\n        audioFiles: [...track.audioFiles, ...[{\r\n          ...audioObj,\r\n          ...{\r\n            start_at: start_at,\r\n          }\r\n        }]],\r\n      }\r\n    }\r\n    return track\r\n  })\r\n}\r\n\r\n\r\nexport const getDraggableAudio = (tracks) => {\r\n  let [exists, current_track_id, audioFile] = [false, null, null]\r\n  for (let i = 0; i < tracks.length; i++) {\r\n    audioFile = tracks[i].audioFiles.filter(item => item.dragging === true)\r\n    if (audioFile.length > 0) {\r\n      [exists, current_track_id, audioFile] = [true, tracks[i].id, audioFile[0]]\r\n      break\r\n    }\r\n  }\r\n\r\n  return [exists, current_track_id, audioFile]\r\n}\r\n\r\nexport const updateState = (audioFiles, obj) => {\r\n  return audioFiles.map((audioFile) => {\r\n    return audioFile.id === obj.id\r\n      ? {\r\n        ...audioFile,\r\n        ...obj,\r\n      }\r\n      : audioFile\r\n  })\r\n}\r\n\r\nexport const updateCurrentAudioTime = (tracks, currentTime, headIsMoving) => {\r\n  return tracks.map((track) => {\r\n    track.audioFiles.map((audioFile) => {\r\n      if (currentTime >= audioFile.start_at && currentTime <= parseInt(audioFile.audioElement.duration) + audioFile.start_at) {\r\n        audioFile.audioElement.currentTime = currentTime - audioFile.start_at\r\n        if (headIsMoving && !audioFile.isPlaying) {\r\n          audioFile.audioElement.play()\r\n        }\r\n      } else if (audioFile.start_at > currentTime) {\r\n        audioFile.audioElement.pause()\r\n        audioFile.audioElement.currentTime = 0\r\n      } else if (parseInt(audioFile.audioElement.duration) + audioFile.start_at <= currentTime) {\r\n        audioFile.audioElement.currentTime = audioFile.audioElement.duration\r\n        if (audioFile.isPlaying) {\r\n          audioFile.audioElement.pause()\r\n        }\r\n      }\r\n    })\r\n    return track\r\n  })\r\n}\r\n\r\nexport const storePreviousHistory = () => {\r\n\r\n}","import { createContext, useEffect, useState } from 'react'\r\nimport PlayerState, { Track } from '../States/States'\r\nimport Json from '../assets/tool_audio_data_sample.json'\r\n\r\nconst PlayerContext = createContext()\r\n\r\nconst PlayerContextProvider = ({ children }) => {\r\n\r\n    const [tracks, setTracks] = useState([])\r\n    const [config, setConfig] = useState({})\r\n    const [pastQueue, setPastQueue] = useState([])\r\n    const [futureQueue, setFutureQueue] = useState([])\r\n\r\n    useEffect(() => {\r\n        let solo = false\r\n        for (const track of Json.tracks) {\r\n            let dummyAudios = []\r\n            for (const sample of track.samples) {\r\n                dummyAudios.push(\r\n                    PlayerState({\r\n                        src: sample.url,\r\n                        filename: sample.filename,\r\n                        start_at: sample.start\r\n                    })\r\n                )\r\n            }\r\n            setTracks([\r\n                ...tracks,\r\n                Track({\r\n                    name: track.name,\r\n                    params: {\r\n                        gain: track.params.gain,\r\n                        solo: track.params.solo,\r\n                        mute: track.params.mute,\r\n                    },\r\n                    audioFiles: dummyAudios\r\n                })\r\n            ])\r\n            solo = solo || track.params.solo\r\n        }\r\n        setConfig({\r\n            ...config,\r\n            name: Json.name,\r\n            secondsPerBox: Json.config.grid,\r\n            zoomBy: Json.config.zoom,\r\n            maxZoom: 60 * 10,\r\n            minZoom: 5,\r\n            currentPlayTime: 5,\r\n            headIsMoving: false,\r\n            snap: Json.config.snap,\r\n            solo: solo,\r\n            mute: false,\r\n            volume: 1.0,\r\n            historyFlag: true\r\n        })\r\n    }, [])\r\n\r\n    return (\r\n        <PlayerContext.Provider\r\n            value={{ config, setConfig, tracks, setTracks, pastQueue, futureQueue, setPastQueue, setFutureQueue }}\r\n        >\r\n            {children}\r\n        </PlayerContext.Provider>\r\n    )\r\n}\r\n\r\nexport { PlayerContext, PlayerContextProvider }\r\n","import {timelineConfig} from '../config';\r\n\r\nconst timelineTimeTrackerHeight = 25;\r\n\r\nconst timelineTimeTrackerGradientHeight = 10;\r\n\r\nexport const timelineScrollStyle = {\r\n    width: timelineConfig.timelineBoxSize*timelineConfig.timelineMinBoxNumbers,\r\n}\r\n\r\nexport const timelineTracklineStyle = {\r\n    height: timelineConfig.timelineBoxSize,\r\n    backgroundSize: timelineConfig.timelineBoxSize,\r\n};\r\n\r\nexport const playHeadTopStyle = {\r\n    height: timelineTimeTrackerHeight,\r\n};\r\nexport const topTmpTrackerStyle = {\r\n    height: timelineTimeTrackerHeight,\r\n};\r\nexport const timelineTrackerStyle = {\r\n    height: timelineTimeTrackerHeight,\r\n    backgroundSize:\r\n        timelineConfig.timelineBoxSize + \"px\" + \" \" + timelineTimeTrackerGradientHeight + \"px\",\r\n};\r\n\r\nexport const timelineTimeValueStyle = {\r\n    width: timelineConfig.timelineBoxSize,\r\n}","import { timelineScrollStyle } from \"./timelineStyle\";\r\n\r\nexport default ({ children }) => {\r\n    return (\r\n        <div className=\"timeline-scroll-container\">\r\n            <div className=\"timeline-scroll\" style={timelineScrollStyle}>\r\n                {children}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","import { timelineConfig } from \"../config\";\r\n\r\nexport default ({event, container, config}) => {\r\n    const { timelineBoxSize } = timelineConfig;\r\n    const { secondsPerBox } = config;\r\n    const bcr = container.current.getBoundingClientRect();\r\n    const scrollLeft = container.current.scrollLeft;\r\n    const currentX = scrollLeft + event.clientX - bcr.left\r\n    return (currentX / timelineBoxSize) * secondsPerBox;\r\n}","import React, { useState, useRef } from \"react\";\r\n\r\nexport default ({ children, updateCurrentTime }) => {\r\n    const [mouseDrag, setMouseDrag] = useState(false);\r\n    const containerElem = useRef();\r\n\r\n    const updateCurrentTimePosition = (e) => {\r\n        let bcr = containerElem.current.getBoundingClientRect();\r\n        let position_in_percent = (e.clientX - bcr.left) / bcr.width; // ex 0.25 (25%)\r\n        updateCurrentTime(position_in_percent);\r\n    };\r\n\r\n    const onMouseDownHandler = (e) => {\r\n        updateCurrentTimePosition(e);\r\n        setMouseDrag(true);\r\n    };\r\n\r\n    const onMouseUpHandler = (e) => {\r\n        setMouseDrag(false);\r\n    };\r\n\r\n    const onMouseLeaveHandler = (e) => {\r\n        if(mouseDrag) {\r\n            setMouseDrag(false);\r\n        }\r\n    };\r\n\r\n    const onMouseMoveHandler = (e) => {\r\n        if (mouseDrag) {\r\n            updateCurrentTimePosition(e);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div\r\n            // ref={containerElem}\r\n            // onMouseDown={onMouseDownHandler}\r\n            // onMouseUp={onMouseUpHandler}\r\n            // onMouseLeave={onMouseLeaveHandler}\r\n            // onMouseMove={onMouseMoveHandler}\r\n        >\r\n            {children}\r\n        </div>\r\n    );\r\n};\r\n","import { timelineConfig } from \"../config\";\r\n\r\nexport const waveformStyle = {\r\n    height: timelineConfig.timelineBoxSize - 5,\r\n};","import React, { useState, useEffect } from 'react'\r\nimport waveformService from './Waveform.service'\r\nimport { waveformStyle } from '../playerStyle'\r\n\r\nexport default ({\r\n                    decodedBuffer,\r\n                    audioProgress,\r\n                    color,\r\n                    waveformWidth,\r\n                    id,\r\n                }) => {\r\n    const [waveformMasks, setWaveformMasks] = useState(0)\r\n\r\n    useEffect(() => {\r\n        if (decodedBuffer.length > 0) {\r\n            const waveformMask = waveformService({\r\n                buffer: decodedBuffer,\r\n                waveformWidth: waveformWidth,\r\n            })\r\n            setWaveformMasks(waveformMask)\r\n        }\r\n    }, [decodedBuffer, waveformWidth])\r\n\r\n    return (\r\n        <div\r\n            className=\"waveform\"\r\n            style={{\r\n                ...waveformStyle,\r\n                width: waveformWidth,\r\n                backgroundColor: color,\r\n            }}\r\n        >\r\n            <svg\r\n                viewBox=\"0 0 100 100\"\r\n                className=\"waveform-container\"\r\n                style={{\r\n                    width: waveformWidth,\r\n                }}\r\n                preserveAspectRatio=\"none\"\r\n            >\r\n                <rect\r\n                    style={{\r\n                        clipPath: 'url(#' + id + ')',\r\n                        fill: 'rgba(229, 231, 235,.4)',\r\n                    }}\r\n                    x=\"0\"\r\n                    y=\"0\"\r\n                    height=\"100\"\r\n                    width=\"100\"\r\n                />\r\n                <rect\r\n                    style={{clipPath: 'url(#' + id + ')', fill: '#F3F4F6'}}\r\n                    x=\"0\"\r\n                    y=\"0\"\r\n                    height=\"100\"\r\n                    width={audioProgress}\r\n                />\r\n            </svg>\r\n\r\n            <svg height=\"0\" width=\"0\">\r\n                <defs>\r\n                    <clipPath id={id}>{waveformMasks}</clipPath>\r\n                </defs>\r\n            </svg>\r\n        </div>\r\n    )\r\n};\r\n","import { timelineConfig } from '../../config'\r\n\r\nexport default ({buffer, waveformWidth}) => {\r\n    const SPACE_BETWEEN_BARS = (timelineConfig.timelineBoxSize * 0.02) / 100\r\n    const numberOfBoxes = parseInt(waveformWidth / timelineConfig.timelineBoxSize)\r\n    const NUMBER_OF_BUCKETS = numberOfBoxes * 30\r\n\r\n    let svgRects = []\r\n    let ukey = 0\r\n    let decodedAudioData = buffer.getChannelData(0)\r\n    let bucketDataSize = Math.floor(\r\n        decodedAudioData.length / NUMBER_OF_BUCKETS\r\n    )\r\n    let buckets = []\r\n    for (let i = 0; i < NUMBER_OF_BUCKETS; i++) {\r\n        let startingPoint = i * bucketDataSize\r\n        let endingPoint = i * bucketDataSize + bucketDataSize\r\n        let max = 0\r\n        for (let j = startingPoint; j < endingPoint; j++) {\r\n            if (decodedAudioData[j] > max) {\r\n                max = decodedAudioData[j]\r\n            }\r\n        }\r\n        let size = Math.abs(max)\r\n        if (size > 0) {\r\n            buckets.push(size / 2)\r\n        }\r\n    }\r\n\r\n    buckets.map((bucket, i) => {\r\n        ukey++\r\n        let bucketSVGWidth = 100.0 / buckets.length\r\n        let bucketSVGHeight = bucket * 120.0 // 100.0 original height\r\n\r\n        svgRects.push(\r\n            <rect\r\n                x={bucketSVGWidth * i + SPACE_BETWEEN_BARS / 2.0}\r\n                y={(100 - bucketSVGHeight) / 2.0}\r\n                width={bucketSVGWidth - SPACE_BETWEEN_BARS}\r\n                height={bucketSVGHeight}\r\n                key={ukey}\r\n            />\r\n        )\r\n        return bucket\r\n    })\r\n\r\n    return svgRects\r\n};\r\n","import React, { useState, useEffect, useContext } from 'react'\r\nimport axios from 'axios'\r\nimport WaveformPlayer from './WaveformPlayer'\r\nimport Waveform from './Waveform/Waveform'\r\nimport ReactAudioPlayer from 'react-audio-player'\r\nimport mime from 'mime-types'\r\nimport { updateAudio } from '../States/States'\r\nimport { PlayerContext } from '../Context/PlayerContext'\r\nimport { timelineConfig } from '../config'\r\nimport calcWaveFormWidth from '../helpers/calcWaveFormWidth'\r\n\r\nexport default ({ audioFile, color, trackIndex }) => {\r\n    const {\r\n        id,\r\n        src,\r\n        audioBufferRaw,\r\n        decodedBufferRaw,\r\n        createdBlobUrl,\r\n        filename,\r\n        audioElement,\r\n        volume,\r\n        isMuted,\r\n        loading,\r\n        start_at,\r\n        waveformWidth,\r\n    } = audioFile\r\n    const { tracks, setTracks, config } = useContext(PlayerContext)\r\n    const { currentPlayTime, headIsMoving, secondsPerBox } = config\r\n    const [audioBuffer, setAudioBuffer] = useState(new ArrayBuffer(0))\r\n    const [audioProgress, setAudioProgress] = useState(0)\r\n    const [blobUrl, setBlobUrl] = useState(null)\r\n    const [decodedBuffer, setDecodedBuffer] = useState([])\r\n    let rap = React.createRef()\r\n\r\n    useEffect(() => {\r\n        if (audioBufferRaw.byteLength > 0) {\r\n            setBlobUrl(createdBlobUrl)\r\n            setAudioBuffer(audioBufferRaw)\r\n            return\r\n        }\r\n\r\n        if (typeof src === 'string' || src instanceof String) {\r\n            axios({ url: src, responseType: 'arraybuffer' }).then(\r\n                (response) => {\r\n                    var blob = new Blob([response.data], {\r\n                        type: mime.lookup(filename),\r\n                    })\r\n                    var url = window.URL.createObjectURL(blob)\r\n                    setBlobUrl(url)\r\n                    setAudioBuffer(response.data)\r\n                }\r\n            )\r\n        }\r\n    }, [src])\r\n\r\n    const drumPlay = () => {\r\n        if (!rap.audioEl) return\r\n\r\n        if (window._CONTEXT == undefined) {\r\n            const AudioContext = window.AudioContext || window.webkitAudioContext\r\n            window._CONTEXT = new AudioContext();\r\n        }\r\n        const gainNode = window._CONTEXT.createGain()\r\n        // gainNode.gain.value = tracks[trackIndex].params.gain;\r\n        gainNode.gain.value = Math.pow(10, (tracks[trackIndex].params.gain/20));\r\n        console.log(\"=====\", gainNode.gain.value)\r\n        gainNode.connect(window._CONTEXT.destination)\r\n\r\n        if (!rap.audioEl) return\r\n\r\n        if (window.WEAK_MAP.has(rap.audioEl.current)) {\r\n            let source = window.WEAK_MAP.get(rap.audioEl.current)\r\n            source.disconnect()\r\n            source.connect(gainNode)\r\n        } else {\r\n            let source = window._CONTEXT.createMediaElementSource(rap.audioEl.current)\r\n            source.connect(gainNode)\r\n            gainNode.connect(window._CONTEXT.destination)\r\n            window.WEAK_MAP.set(rap.audioEl.current, source);\r\n        }\r\n\r\n    }\r\n\r\n    useEffect(() => {\r\n        console.log(\"============\", tracks[trackIndex].params.gain, blobUrl)\r\n        drumPlay();\r\n    }, [tracks[trackIndex].params.gain])\r\n\r\n    // useEffect(() => {\r\n    //     drumPlay();\r\n    // }, [blobUrl])\r\n\r\n    useEffect(() => {\r\n        if (decodedBufferRaw.length > 0) {\r\n            setDecodedBuffer(decodedBufferRaw)\r\n            return\r\n        }\r\n        if (audioBuffer.byteLength > 0) {\r\n            let audioCtx = new (window.AudioContext ||\r\n                window.webkitAudioContext)()\r\n            audioCtx.decodeAudioData(audioBuffer, (buffer) => {\r\n                setDecodedBuffer(buffer)\r\n            })\r\n        }\r\n    }, [audioBuffer])\r\n\r\n    useEffect(() => {\r\n        if (decodedBuffer.length > 0 && decodedBufferRaw.length === 0) {\r\n            setTracks(\r\n                updateAudio(tracks, {\r\n                    id: id,\r\n                    decodedBufferRaw: decodedBuffer,\r\n                })\r\n            )\r\n        }\r\n    }, [decodedBuffer])\r\n\r\n    useEffect(() => {\r\n        if (\r\n            !loading &&\r\n            // audioElement.currentTime > 0 &&\r\n            audioElement.currentTime != currentPlayTime - start_at\r\n        ) {\r\n            audioElement.currentTime = currentPlayTime - start_at\r\n        }\r\n    }, [start_at])\r\n\r\n    useEffect(() => {\r\n        if (\r\n            !loading &&\r\n            headIsMoving &&\r\n            currentPlayTime >= start_at &&\r\n            currentPlayTime <= audioElement.duration + start_at\r\n        ) {\r\n            if (!audioFile.isPlaying) {\r\n                if (currentPlayTime > 0 && audioElement.currentTime == 0) {\r\n                    audioElement.currentTime = currentPlayTime - start_at\r\n                }\r\n                audioElement.play()\r\n            }\r\n        }\r\n        if (!headIsMoving && audioFile.isPlaying) {\r\n            audioElement.pause()\r\n        }\r\n    }, [headIsMoving, currentPlayTime])\r\n\r\n    const updateCurrentTime = (position) => {\r\n        audioElement.currentTime = position * audioElement.duration\r\n    }\r\n\r\n    const handleAudioListener = (currentTime) => {\r\n        setAudioProgress((currentTime / audioElement.duration) * 100)\r\n    }\r\n\r\n    const setAudioElement = (elem) => {\r\n        setTracks(\r\n            updateAudio(tracks, {\r\n                id: id,\r\n                audioElement: elem,\r\n                audioBufferRaw:\r\n                    audioBuffer.byteLength > 0 &&\r\n                        audioBufferRaw.byteLength === 0\r\n                        ? audioBuffer.slice(0)\r\n                        : audioBufferRaw,\r\n                loading: false,\r\n                waveformWidth: calcWaveFormWidth(elem, secondsPerBox),\r\n                duration: elem.duration,\r\n                createdBlobUrl: blobUrl,\r\n            })\r\n        )\r\n    }\r\n\r\n    const setIsPlaying = (isPlaying) => {\r\n        setTracks(\r\n            updateAudio(tracks, {\r\n                id: id,\r\n                isPlaying: isPlaying,\r\n            })\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div\r\n            className=\"audioWavesContainer\"\r\n            onClick={(e) => e.stopPropagation()}\r\n        >\r\n            {blobUrl && (\r\n                <ReactAudioPlayer\r\n                    ref={(element) => { rap = element }}\r\n                    src={blobUrl}\r\n                    muted={(config.solo && !tracks[trackIndex].params.solo) ||\r\n                        (config.mute ||\r\n                            (!config.solo &&\r\n                                (tracks[trackIndex].params.mute || (config.solo && !tracks[trackIndex].params.solo))\r\n                            )\r\n                        )}\r\n                    volume={config.volume}\r\n                    listenInterval={100}\r\n                    onListen={handleAudioListener}\r\n                    onPause={(e) => setIsPlaying(false)}\r\n                    onPlay={(e) => setIsPlaying(true)}\r\n                    onEnded={(e) => setIsPlaying(false)}\r\n                    onSeeked={(e) => handleAudioListener(e.target.currentTime)}\r\n                    onLoadedMetadata={(meta) => setAudioElement(meta.target)}\r\n                />\r\n            )}\r\n            {audioElement && audioElement.duration > 0 && (\r\n                <WaveformPlayer updateCurrentTime={updateCurrentTime}>\r\n                    <Waveform\r\n                        decodedBuffer={decodedBuffer}\r\n                        audioProgress={audioProgress}\r\n                        color={color}\r\n                        waveformWidth={waveformWidth}\r\n                        id={id}\r\n                    />\r\n                </WaveformPlayer>\r\n            )}\r\n        </div>\r\n    )\r\n};\r\n","import React, { useEffect, useState, useContext, useRef } from 'react'\r\nimport Draggable from 'react-draggable'\r\nimport { PlayerContext } from '../Context/PlayerContext'\r\nimport Waves from '../player/Waves'\r\nimport { timelineConfig } from '../config'\r\nimport { moveAudioToOtherTrack, updateAudio } from '../States/States'\r\nimport rangeIntersetct from '../helpers/rangeIntersetct'\r\n\r\nexport default ({\r\n                    color,\r\n                    audioFile,\r\n                    trackIndex,\r\n                    tracksCount,\r\n                    tracklinesContainerElem,\r\n                }) => {\r\n    const {tracks, setTracks, config, setConfig} = useContext(PlayerContext)\r\n    const {id, start_at, waveformWidth, duration, audioElement, audioBufferRaw} = audioFile\r\n    const {secondsPerBox, headIsMoving} = config\r\n    const {timelineBoxSize} = timelineConfig\r\n    const [translateX, setTranslateX] = useState(null)\r\n    const [isDragging, setIsDragging] = useState(false)\r\n    const [isAllowedToDrop, setIsAllowedToDrop] = useState(true)\r\n    const [cssCursor, setCssCursor] = useState('inherit') // inherit, pointer, not-allowed\r\n    const [dragBoundaries, setDragBoundaries] = useState({\r\n        left: 0,\r\n        right: null,\r\n        top: null,\r\n        bottom: null,\r\n    })\r\n    const draggableNodeRef = useRef(null)\r\n\r\n    useEffect(() => {\r\n        if (!isAllowedToDrop) {\r\n            setCssCursor('not-allowed')\r\n        } else if (isAllowedToDrop && isDragging) {\r\n            setCssCursor('pointer')\r\n        } else {\r\n            setCssCursor('inherit')\r\n        }\r\n    }, [isAllowedToDrop, isDragging])\r\n\r\n    useEffect(() => {\r\n        const current_track_index = trackIndex + 1\r\n        const previous_tracks_count = trackIndex\r\n        const next_tracks_count = tracksCount - current_track_index\r\n        const position = (start_at / secondsPerBox) * timelineBoxSize\r\n        setTranslateX(position)\r\n        const parentNode = tracklinesContainerElem.current.getBoundingClientRect()\r\n        const bond = {\r\n            ...dragBoundaries,\r\n            right: parentNode.width - waveformWidth,\r\n            top: previous_tracks_count * timelineBoxSize * -1,\r\n            bottom: next_tracks_count * timelineBoxSize,\r\n        }\r\n        setDragBoundaries(bond)\r\n    }, [waveformWidth, tracksCount, start_at])\r\n\r\n    const dragHandler = (e, node) => {\r\n        if (!isDragging) {\r\n            setIsDragging(true)\r\n        }\r\n        if (headIsMoving) {\r\n            setConfig({\r\n                ...config,\r\n                headIsMoving: false,\r\n            })\r\n        }\r\n        const move_by_index = Math.round(node.y / timelineBoxSize)\r\n        const new_track_index = trackIndex + move_by_index\r\n        const darggingOver = tracks.filter(\r\n            (item, index) => index === new_track_index\r\n        )\r\n        if (darggingOver.length > 0) {\r\n            const calculated_start_at =\r\n                (node.x / timelineBoxSize) * secondsPerBox\r\n            const intersection = darggingOver[0].audioFiles.filter((item) => {\r\n                if (item.id == id) {\r\n                    return false\r\n                }\r\n                return rangeIntersetct(\r\n                    [calculated_start_at, calculated_start_at + duration],\r\n                    [item.start_at, item.start_at + item.duration]\r\n                )\r\n            })\r\n            const allowedToDrop = intersection.length === 0\r\n            if (isAllowedToDrop !== allowedToDrop) {\r\n                setIsAllowedToDrop(allowedToDrop)\r\n            }\r\n        }\r\n    }\r\n\r\n    const dropHandler = (e, node) => {\r\n        if (!isAllowedToDrop || !isDragging) {\r\n            return false\r\n        }\r\n        const move_by_index = Math.round(node.y / timelineBoxSize)\r\n        const calculated_start_at = config.snap ? Math.round(node.x / timelineBoxSize) * secondsPerBox : (node.x / timelineBoxSize) * secondsPerBox\r\n\r\n        if (node.y === 0 || move_by_index === 0) {\r\n            // keep audio in same track and update start_at\r\n            const upAudio = updateAudio(tracks, {\r\n                id: id,\r\n                start_at: calculated_start_at,\r\n            })\r\n            setTracks(upAudio)\r\n            return false\r\n        }\r\n        // switch track-line & update start_at\r\n\r\n        setTracks(\r\n            moveAudioToOtherTrack(\r\n                tracks,\r\n                audioFile,\r\n                trackIndex,\r\n                move_by_index,\r\n                calculated_start_at\r\n            )\r\n        )\r\n        return false\r\n    }\r\n\r\n    if (translateX == null) {\r\n        return <span>loading</span>\r\n    }\r\n\r\n    return (\r\n        <Draggable\r\n            nodeRef={draggableNodeRef}\r\n            bounds={dragBoundaries}\r\n            position={{x: translateX, y: 2}}\r\n            onDrag={(e, node) => dragHandler(e, node)}\r\n            // onStart={(e) => onStartHandler(e)}\r\n            onStop={(e, node) => {\r\n                dropHandler(e, node)\r\n                setIsDragging(false)\r\n            }}\r\n        >\r\n            <div\r\n                ref={draggableNodeRef}\r\n                className=\"audioWavesDraggable\"\r\n                style={{cursor: cssCursor}}\r\n            >\r\n                <Waves audioFile={audioFile} color={color} trackIndex={trackIndex} setTracks={setTracks}/>\r\n            </div>\r\n        </Draggable>\r\n    )\r\n};\r\n","export default (arr1 = [], arr2 = []) => {\r\n    const [min1, max1] = arr1;\r\n    const [min2, max2] = arr2;\r\n    return (min1 >= min2 && min1 <= max2) || (max1 >= min2 && max1 <= max2)\r\n    || (min2 >= min1 && min2 <= max1) || (max2 >= min1 && max2 <= max1)\r\n};\r\n","import React, { useContext, useRef } from 'react'\r\nimport { PlayerContext } from '../Context/PlayerContext'\r\nimport positionToTime from '../helpers/positionToTime'\r\nimport { updateCurrentAudioTime } from '../States/States'\r\nimport DraggableWave from './DraggableWave'\r\nimport { timelineTracklineStyle } from './timelineStyle'\r\n\r\nexport default ({timelineScrollContainerElem}) => {\r\n    const {tracks, config, setConfig} = useContext(PlayerContext)\r\n    const {headIsMoving} = config\r\n    const tracklinesContainerElem = useRef()\r\n    const handleClickOnEmptySpace = (e) => {\r\n        updateCursorPosition(e)\r\n    }\r\n\r\n    const updateCursorPosition = (e) => {\r\n        const time = positionToTime({\r\n            event: e,\r\n            container: timelineScrollContainerElem,\r\n            config: config,\r\n        })\r\n        setConfig({\r\n            ...config,\r\n            currentPlayTime: time,\r\n        })\r\n        updateCurrentAudioTime(tracks, time, headIsMoving)\r\n    }\r\n\r\n    return (\r\n        <div className=\"tracklines\" ref={tracklinesContainerElem}>\r\n            {tracks.map((track, index) => (\r\n                <div\r\n                    className=\"trackline\"\r\n                    style={timelineTracklineStyle}\r\n                    key={index}\r\n                    onClick={handleClickOnEmptySpace}\r\n                >\r\n                    {track.audioFiles.map((audioFile) => (\r\n                        <DraggableWave\r\n                            audioFile={audioFile}\r\n                            color={track.color}\r\n                            key={audioFile.id}\r\n                            trackIndex={index}\r\n                            tracksCount={tracks.length}\r\n                            tracklinesContainerElem={tracklinesContainerElem}\r\n                        />\r\n                    ))}\r\n                </div>\r\n            ))}\r\n        </div>\r\n    )\r\n};\r\n","import React, { useContext } from 'react'\r\nimport { timelineConfig } from '../config'\r\nimport { PlayerContext } from '../Context/PlayerContext'\r\nimport { timelineTrackerStyle, timelineTimeValueStyle } from './timelineStyle'\r\n\r\nexport default () => {\r\n    const {config} = useContext(PlayerContext)\r\n    return (\r\n        <div className=\"time-tracker\" style={timelineTrackerStyle}>\r\n            {[...Array(timelineConfig.timelineMinBoxNumbers)].map((x, i) => (\r\n                <div className=\"time-value\" style={timelineTimeValueStyle} key={i}>\r\n                    {(i * config.secondsPerBox).toString()}\r\n                </div>\r\n            ))}\r\n        </div>\r\n    )\r\n};\r\n","import React, { useContext } from 'react'\r\nimport { PlayerContext } from '../../Context/PlayerContext'\r\n\r\nexport default () => {\r\n    const { config, setConfig, pastQueue, setPastQueue } = useContext(PlayerContext)\r\n\r\n    const nameHandler = (event) => {\r\n        setPastQueue([...pastQueue, [{\r\n            ...config,\r\n            ...{type: \"config\",}\r\n        }]])\r\n\r\n        setConfig({\r\n            ...config,\r\n            name: event.target.value\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div className=\"main-player-name\">\r\n            <input type=\"text\" defaultValue={config.name} onChange={nameHandler} value={config.name} />\r\n        </div>\r\n    );\r\n}\r\n","export default ({muteHandler}) => {\r\n    return (\r\n        <div className=\"icon-btn-audio\" onClick={muteHandler}>\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\"\r\n                 viewBox=\"0 0 24 24\"\r\n                 fill=\"currentColor\"\r\n                 stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\r\n                <polygon points=\"11 5 6 9 2 9 2 15 6 15 11 19 11 5\"/>\r\n                <path d=\"M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07\"/>\r\n            </svg>\r\n        </div>\r\n    )\r\n};","export default ({unmuteHandler}) => {\r\n    return (\r\n        <div className=\"icon-btn-audio\" onClick={unmuteHandler}>\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\"\r\n                 stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\r\n                <path d=\"M11 5L6 9H2v6h4l5 4zM22 9l-6 6M16 9l6 6\"/>\r\n            </svg>\r\n        </div>\r\n    )\r\n};\r\n","import React, { useContext } from 'react'\r\nimport { PlayerContext } from '../../Context/PlayerContext'\r\n\r\nexport default () => {\r\n    const {config, setConfig} = useContext(PlayerContext)\r\n\r\n    const volumeHandler = (event) => {\r\n        setConfig({\r\n            ...config,\r\n            volume: parseFloat(event.target.value) / 20\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div className=\"main-player-volume\">\r\n            <input type=\"range\" min=\"0\" max=\"20\" defaultValue={(config.volume * 20).toString()}\r\n                   onChange={volumeHandler}\r\n            />\r\n        </div>\r\n    );\r\n};","export default ({playHandler}) => {\r\n    return (\r\n        <div className=\"main-player-play icon-btn\" onClick={playHandler}>\r\n            <svg\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                viewBox=\"0 0 47.604 47.604\"\r\n                fill=\"currentColor\"\r\n            >\r\n                <g>\r\n                    <path\r\n                        d=\"M43.331,21.237L7.233,0.397c-0.917-0.529-2.044-0.529-2.96,0c-0.916,0.528-1.48,1.505-1.48,2.563v41.684\r\n                            c0,1.058,0.564,2.035,1.48,2.563c0.458,0.268,0.969,0.397,1.48,0.397c0.511,0,1.022-0.133,1.48-0.397l36.098-20.84\r\n                            c0.918-0.529,1.479-1.506,1.479-2.564S44.247,21.767,43.331,21.237z\"\r\n                    />\r\n                </g>\r\n            </svg>\r\n        </div>\r\n    );\r\n};\r\n","export default ({pauseHandler}) => {\r\n    return (\r\n        <div className=\"main-player-pause icon-btn\" onClick={pauseHandler}>\r\n            <svg\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                viewBox=\"0 0 47.607 47.607\"\r\n                fill=\"currentColor\"\r\n            >\r\n                <g>\r\n                    <path\r\n                        d=\"M17.991,40.976c0,3.662-2.969,6.631-6.631,6.631l0,0c-3.662,0-6.631-2.969-6.631-6.631V6.631C4.729,2.969,7.698,0,11.36,0\r\n\t\tl0,0c3.662,0,6.631,2.969,6.631,6.631V40.976z\"\r\n                    />\r\n                    <path\r\n                        d=\"M42.877,40.976c0,3.662-2.969,6.631-6.631,6.631l0,0c-3.662,0-6.631-2.969-6.631-6.631V6.631\r\n\t\tC29.616,2.969,32.585,0,36.246,0l0,0c3.662,0,6.631,2.969,6.631,6.631V40.976z\"\r\n                    />\r\n                </g>\r\n            </svg>\r\n        </div>\r\n    );\r\n};\r\n","export default () => {\r\n    return (\r\n        <div className=\"main-player-stop icon-btn\">\r\n            <svg\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                viewBox=\"0 0 47.604 47.604\"\r\n                fill=\"currentColor\"\r\n            >\r\n                <g>\r\n                    <path\r\n                        d=\"M41.346,0H5.388C2.417,0,0,2.417,0,5.388v35.958c0,2.971,2.417,5.388,5.388,5.388h35.958c2.971,0,5.388-2.417,5.388-5.388V5.388C46.733,2.417,44.316,0,41.346,0z\"\r\n                    />\r\n                </g>\r\n            </svg>\r\n        </div>\r\n    );\r\n};\r\n","export default () => {\r\n    return (\r\n        <div className=\"main-player-record icon-btn\">\r\n            <svg\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                viewBox=\"0 0 29.107 29.107\"\r\n                fill=\"currentColor\"\r\n            >\r\n                <g>\r\n                    <path\r\n                        d=\"M14.554,0C6.561,0,0,6.562,0,14.552c0,7.996,6.561,14.555,14.554,14.555c7.996,0,14.553-6.559,14.553-14.555\r\n\t\t\t\tC29.106,6.562,22.55,0,14.554,0z\"\r\n                    />\r\n                </g>\r\n            </svg>\r\n        </div>\r\n    );\r\n};\r\n","export default ({backwardHandler}) => {\r\n    return (\r\n        <div className=\"main-player-fastforwardleft icon-btn\" onClick={backwardHandler}>\r\n            <svg\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                viewBox=\"0 0 66.31 66.31\"\r\n                fill=\"currentColor\"\r\n            >\r\n                <g>\r\n                    <path\r\n                        d=\"M1.609,30.368L29.19,14.443c0.996-0.574,2.222-0.574,3.218,0s1.609,1.639,1.609,2.787v13.072l27.466-15.859\r\n\t\tc0.997-0.574,2.222-0.574,3.218,0s1.609,1.639,1.609,2.787v31.849c0,1.15-0.613,2.213-1.609,2.787\r\n\t\tc-0.498,0.287-1.053,0.432-1.607,0.432s-1.111-0.145-1.609-0.432L34.017,36.009v13.07c0,1.15-0.613,2.213-1.609,2.787\r\n\t\tc-0.498,0.287-1.054,0.432-1.609,0.432s-1.111-0.145-1.608-0.432L1.609,35.942C0.613,35.368,0,34.303,0,33.155\r\n\t\tS0.613,30.942,1.609,30.368z\"\r\n                    />\r\n                </g>\r\n            </svg>\r\n        </div>\r\n    )\r\n};","export default ({forwardHandler}) => {\r\n    return (\r\n        <div className=\"main-player-fastforwardright icon-btn\" onClick={forwardHandler}>\r\n            <svg\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                viewBox=\"0 0 66.307 66.307\"\r\n                fill=\"currentColor\"\r\n            >\r\n                <g>\r\n                    <path\r\n                        d=\"M64.702,30.366L37.12,14.442c-0.995-0.574-2.221-0.574-3.217,0s-1.609,1.639-1.609,2.787v13.072L4.827,14.442\r\n\t\tc-0.997-0.574-2.222-0.574-3.218,0S0,16.081,0,17.229v31.849c0,1.148,0.613,2.211,1.609,2.785c0.498,0.287,1.053,0.432,1.608,0.432\r\n\t\ts1.111-0.145,1.609-0.432l27.466-15.857v13.072c0,1.148,0.612,2.211,1.608,2.785c0.498,0.287,1.055,0.432,1.609,0.432\r\n\t\ts1.111-0.145,1.607-0.432l27.582-15.924c0.996-0.574,1.609-1.637,1.609-2.787C66.311,32.004,65.698,30.94,64.702,30.366z\"\r\n                    />\r\n                </g>\r\n            </svg>\r\n        </div>\r\n    );\r\n};\r\n","import React, { useContext, useCallback, useMemo, useState } from 'react'\r\nimport { PlayerContext } from '../../Context/PlayerContext'\r\n\r\nexport default () => {\r\n\r\n    const { config, setConfig, tracks, setTracks, pastQueue, futureQueue, setPastQueue, setFutureQueue } = useContext(PlayerContext)\r\n\r\n    const handler = () => {\r\n        console.log(\"===========\", pastQueue)\r\n        if (pastQueue.length > 0) {\r\n            switch (pastQueue.at(-1)[0].type) {\r\n                case \"config\":\r\n                    setConfig(pastQueue.at(-1)[0])\r\n                    setPastQueue(pastQueue.slice(0, -1))\r\n                    setFutureQueue([...futureQueue, ...pastQueue.slice(-1)])\r\n                    break;\r\n                case \"tracks\":\r\n                    setTracks(pastQueue.at(-1))\r\n                    setPastQueue(pastQueue.slice(0, -1))\r\n                    setFutureQueue([...futureQueue, ...pastQueue.slice(-1)])\r\n                    break;\r\n                default:\r\n\r\n            }\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"icon-btn-undo\" onClick={handler}>\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width={24} height={24} viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\"\r\n                strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\r\n                <path d=\"M10 16l-6-6 6-6\" />\r\n                <path d=\"M20 21v-7a4 4 0 0 0-4-4H5\" />\r\n            </svg>\r\n        </div>\r\n    )\r\n};","import React, { useContext, useCallback, useMemo, useState } from 'react'\r\nimport { PlayerContext } from '../../Context/PlayerContext'\r\n\r\nexport default () => {\r\n\r\n    const { config, setConfig, tracks, setTracks, pastQueue, futureQueue, setPastQueue, setFutureQueue } = useContext(PlayerContext)\r\n\r\n    const handler = () => {\r\n        if (futureQueue.length > 0) {\r\n            switch (futureQueue.at(-1)[0].type) {\r\n                case \"config\":\r\n                    setConfig(futureQueue.at(-1)[0])\r\n                    setFutureQueue(futureQueue.slice(0, -1))\r\n                    setPastQueue([...pastQueue, ...futureQueue.slice(-1)])\r\n                    break;\r\n                case \"tracks\":\r\n                    setTracks(futureQueue.at(-1))\r\n                    setFutureQueue(futureQueue.slice(0, -1))\r\n                    setPastQueue([...pastQueue, ...futureQueue.slice(-1)])\r\n                    break;\r\n                default:\r\n\r\n            }\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"icon-btn-redo\" onClick={handler}>\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width={24} height={24} viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\"\r\n                strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\r\n                <path d=\"M14 16l6-6-6-6\" />\r\n                <path d=\"M4 21v-7a4 4 0 0 1 4-4h11\" />\r\n            </svg>\r\n        </div>\r\n    )\r\n};\r\n","import React, { useRef } from 'react'\r\n\r\nexport default () => {\r\n    const fileInput = useRef(null);\r\n    const handleClick = () => {\r\n        fileInput.current.click();\r\n    }\r\n    const handleChange = e => {\r\n        const fileUpload = e.target.files[0];\r\n\r\n    }\r\n    return (\r\n        <div className=\"main-player-load\">\r\n            <input type=\"file\" ref={fileInput} style={{ display: 'none' }} onChange={handleChange} />\r\n            <input type=\"button\" value={\"Load\"} onClick={handleClick} />\r\n        </div>\r\n    );\r\n}\r\n","import React, { useContext } from 'react'\r\n\r\nexport default () => {\r\n    return (\r\n        <div className=\"main-player-save\">\r\n            <input type=\"button\" value=\"Save\"/>\r\n        </div>\r\n    );\r\n}\r\n","import React, { useContext, useEffect, useCallback } from 'react'\r\nimport { PlayerContext } from '../../Context/PlayerContext'\r\nimport { updateCurrentAudioTime } from '../../States/States'\r\nimport { timelineConfig } from '../../config'\r\nimport ProjectName from './ProjectName'\r\nimport AudioBtn from './AudioBtn'\r\nimport AudioMuteBtn from './AudioMuteBtn'\r\nimport AudioVolume from './AudioVolume'\r\nimport PlayBtn from './PlayBtn'\r\nimport PauseBtn from './PauseBtn'\r\nimport StopBtn from './StopBtn'\r\nimport RecordBtn from './RecordBtn'\r\nimport FastForwardLeftBtn from './FastForwardLeftBtn'\r\nimport FastForwardRightBtn from './FastForwardRightBtn'\r\nimport Undo from './Undo'\r\nimport Redo from './Redo'\r\nimport Load from './Load'\r\nimport Save from './Save'\r\n\r\nexport default () => {\r\n    const { config, setConfig, tracks, setTracks } = useContext(PlayerContext)\r\n\r\n    const playHandler = () => {\r\n        setConfig({\r\n            ...config,\r\n            headIsMoving: true,\r\n        })\r\n    }\r\n\r\n    const pauseHandler = () => {\r\n        setConfig({\r\n            ...config,\r\n            headIsMoving: false,\r\n        })\r\n    }\r\n\r\n    const muteHandler = () => {\r\n        setConfig({\r\n            ...config,\r\n            mute: true\r\n        })\r\n    }\r\n\r\n    const unmuteHandler = () => {\r\n        setConfig({\r\n            ...config,\r\n            mute: false,\r\n        })\r\n    }\r\n\r\n    const backwardHandler = () => {\r\n        let time = Math.max(0, config.currentPlayTime - config.secondsPerBox)\r\n        setConfig({\r\n            ...config,\r\n            currentPlayTime: time\r\n        })\r\n        updateCurrentAudioTime(tracks, time, config.headIsMoving)\r\n    }\r\n\r\n    const forwardHandler = () => {\r\n        let time = Math.min(timelineConfig.timelineMinBoxNumbers * config.secondsPerBox, config.currentPlayTime + config.secondsPerBox)\r\n        setConfig({\r\n            ...config,\r\n            currentPlayTime: time\r\n        })\r\n        updateCurrentAudioTime(tracks, time, config.headIsMoving)\r\n    }\r\n\r\n    const getKeyEvent = useCallback((e) => {\r\n        const { keyCode } = e;\r\n        if (keyCode === 32) {\r\n            setConfig({\r\n                ...config,\r\n                headIsMoving: !config.headIsMoving,\r\n            })\r\n        }\r\n    })\r\n\r\n    useEffect(() => {\r\n        document.addEventListener('keydown', getKeyEvent)\r\n        return () => {\r\n            document.removeEventListener('keydown', getKeyEvent)\r\n        }\r\n    }, [getKeyEvent])\r\n\r\n    return (\r\n        <div className=\"main-player\">\r\n            <ProjectName />\r\n            {!config.mute && <AudioBtn muteHandler={muteHandler} />}\r\n            {config.mute && <AudioMuteBtn unmuteHandler={unmuteHandler} />}\r\n            <AudioVolume />\r\n            <RecordBtn />\r\n            <StopBtn />\r\n            <FastForwardLeftBtn backwardHandler={backwardHandler} />\r\n            {!config.headIsMoving && <PlayBtn playHandler={playHandler} />}\r\n            {config.headIsMoving && <PauseBtn pauseHandler={pauseHandler} />}\r\n            <FastForwardRightBtn forwardHandler={forwardHandler} />\r\n            <Undo />\r\n            <Redo />\r\n            <Load />\r\n            <Save />\r\n        </div>\r\n    )\r\n};\r\n","import React, { useEffect, useState, useContext } from 'react'\r\nimport useInterval from '../helpers/useInterval'\r\nimport { PlayerContext } from '../Context/PlayerContext'\r\nimport { updateCurrentAudioTime } from '../States/States'\r\nimport { timelineConfig } from '../config'\r\nimport { playHeadTopStyle } from '../timeline/timelineStyle'\r\nimport positionToTime from '../helpers/positionToTime'\r\n\r\nexport default ({ timelineScrollContainerElem }) => {\r\n    const { tracks, config, setConfig } = useContext(PlayerContext)\r\n    const { secondsPerBox, currentPlayTime, headIsMoving } = config\r\n    const { timelineBoxSize } = timelineConfig\r\n    const arrowWidth = 10\r\n    const [mouseDrag, setMouseDrag] = useState(false)\r\n    const [translateX, setTranslateX] = useState(0)\r\n    const secondsRefreshValue = secondsPerBox / 100\r\n    useInterval(() => {\r\n        if (!mouseDrag && headIsMoving) {\r\n            console.log(secondsRefreshValue)\r\n            setConfig({\r\n                ...config,\r\n                currentPlayTime: currentPlayTime + secondsRefreshValue,\r\n            })\r\n        }\r\n    }, secondsRefreshValue * 1000) // each 0.01 seconds\r\n\r\n    useEffect(() => {\r\n        let position = (currentPlayTime / secondsPerBox) * timelineBoxSize\r\n        setTranslateX(position - arrowWidth)\r\n    }, [currentPlayTime, secondsPerBox])\r\n\r\n    const updatePosition = (e) => {\r\n        const time = positionToTime({\r\n            event: e,\r\n            container: timelineScrollContainerElem,\r\n            config: config,\r\n        })\r\n        setConfig({\r\n            ...config,\r\n            currentPlayTime: time,\r\n        })\r\n        updateCurrentAudioTime(tracks, time, headIsMoving)\r\n    }\r\n\r\n    const onMouseDownHandler = (e) => {\r\n        updatePosition(e)\r\n        setMouseDrag(true)\r\n    }\r\n\r\n    const onMouseUpHandler = (e) => {\r\n        setMouseDrag(false)\r\n    }\r\n\r\n    const onMouseLeaveHandler = (e) => {\r\n        if (mouseDrag) {\r\n            setMouseDrag(false)\r\n        }\r\n    }\r\n\r\n    const onMouseMoveHandler = (e) => {\r\n        if (mouseDrag) {\r\n            updatePosition(e)\r\n        }\r\n    }\r\n    const onMouseDragHandler = (e) => {\r\n        updatePosition(e)\r\n    }\r\n\r\n    const styles = {\r\n        playHead: {\r\n            transform: `translate(${translateX}px`,\r\n        },\r\n        playHeadTop: {\r\n            width: arrowWidth * 2,\r\n            height: 15,\r\n        },\r\n        playHeadArrow: {\r\n            borderWidth: arrowWidth,\r\n        },\r\n    }\r\n\r\n    return (\r\n        <div className=\"playHead-container\">\r\n            <div\r\n                className=\"playHead-top-line\"\r\n                style={playHeadTopStyle}\r\n                onMouseDown={onMouseDownHandler}\r\n                // onMouseUp={onMouseUpHandler}\r\n                // onMouseLeave={onMouseLeaveHandler}\r\n                // onMouseMove={onMouseMoveHandler}\r\n                onDrag={onMouseDragHandler}\r\n            />\r\n            <div\r\n                style={styles.playHead}\r\n                className=\"playHead\"\r\n                onMouseDown={onMouseDownHandler}\r\n                // onMouseUp={onMouseUpHandler}\r\n                // onMouseLeave={onMouseLeaveHandler}\r\n                // onMouseMove={onMouseMoveHandler}\r\n                onDrag={onMouseDragHandler}\r\n            >\r\n                <div className=\"playHead-top\" style={styles.playHeadTop} />\r\n                <div\r\n                    className=\"playHead-head-arrow\"\r\n                    style={styles.playHeadArrow}\r\n                />\r\n                <div className=\"playHead-line\" />\r\n            </div>\r\n        </div>\r\n    )\r\n};\r\n","import React, { useEffect, useRef } from \"react\";\r\n\r\nexport default function(callback, delay){\r\n    const savedCallback = useRef();\r\n\r\n    useEffect(() => {\r\n        savedCallback.current = callback;\r\n    }, [callback]);\r\n\r\n    useEffect(() => {\r\n        function tick() {\r\n            savedCallback.current();\r\n        }\r\n        if (delay !== null) {\r\n            let id = setInterval(tick, delay);\r\n            return () => clearInterval(id);\r\n        }\r\n    }, [delay]);\r\n}\r\n","export const containerStyle = {\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n    justifyContent: 'center',\r\n    alignItems: 'top'\r\n}\r\n\r\nexport const baseStyle = {\r\n    flex: 1,\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n    padding: \"20px\",\r\n    borderWidth: 2,\r\n    borderRadius: 2,\r\n    borderColor: \"#eeeeee\",\r\n    borderStyle: \"dashed\",\r\n    backgroundColor: \"#fafafa\",\r\n    color: \"#bdbdbd\",\r\n    outline: \"none\",\r\n    transition: \"border .24s ease-in-out\",\r\n    marginTop: \"20px\",\r\n    marginLeft: \"auto\",\r\n    marginRight: \"auto\",\r\n    maxWidth: \"400px\",\r\n};\r\n\r\nexport const baseStyle1 = {\r\n    flex: 1,\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n    padding: \"20px\",\r\n    borderWidth: 2,\r\n    borderRadius: 2,\r\n    borderColor: \"#eeeeee\",\r\n    borderStyle: \"dashed\",\r\n    backgroundColor: \"#fafafa\",\r\n    color: \"#bdbdbd\",\r\n    outline: \"none\",\r\n    transition: \"border .24s ease-in-out\",\r\n    marginTop: \"10px\",\r\n    marginLeft: \"auto\",\r\n    marginRight: \"auto\",\r\n    width: '240px',\r\n    height: '80px',\r\n    justifyContent: 'center'\r\n};\r\n\r\nexport const activeStyle = {\r\n    borderColor: \"#2196f3\",\r\n};\r\n\r\nexport const acceptStyle = {\r\n    borderColor: \"#00e676\",\r\n};\r\n\r\nexport const rejectStyle = {\r\n    borderColor: \"#ff1744\",\r\n};\r\n","import React, { useMemo, useContext } from 'react'\r\nimport { useDropzone } from 'react-dropzone'\r\nimport {\r\n    baseStyle,\r\n    baseStyle1,\r\n    activeStyle,\r\n    acceptStyle,\r\n    rejectStyle,\r\n    containerStyle,\r\n} from './uploaderStyle'\r\nimport PlayerState, { Track } from '../States/States'\r\nimport { PlayerContext } from '../Context/PlayerContext'\r\n\r\nexport default () => {\r\n    const { tracks, setTracks } = useContext(PlayerContext)\r\n    const {\r\n        getRootProps,\r\n        getInputProps,\r\n        isDragActive,\r\n        isDragAccept,\r\n        isDragReject,\r\n    } = useDropzone({\r\n        accept: 'audio/*',\r\n        onDrop: (acceptedFiles) => {\r\n            const newTracks = acceptedFiles.map((file) => {\r\n                const audioFile = PlayerState({\r\n                    src: URL.createObjectURL(file),\r\n                    filename: file.name,\r\n                    isBlob: true,\r\n                })\r\n                return Track({\r\n                    name: '',\r\n                    params: {\r\n                        gain: 0,\r\n                        solo: false,\r\n                        mute: false,\r\n                    },\r\n                    audioFiles: [audioFile]\r\n                })\r\n            })\r\n            setTracks([...tracks, ...newTracks])\r\n        },\r\n    })\r\n\r\n    const style = useMemo(\r\n        () => ({\r\n            ...baseStyle,\r\n            ...(isDragActive ? activeStyle : {}),\r\n            ...(isDragAccept ? acceptStyle : {}),\r\n            ...(isDragReject ? rejectStyle : {}),\r\n        }),\r\n        [isDragActive, isDragReject, isDragAccept]\r\n    )\r\n\r\n    const style1 = useMemo(\r\n        () => ({\r\n            ...baseStyle1,\r\n            ...(isDragActive ? activeStyle : {}),\r\n            ...(isDragAccept ? acceptStyle : {}),\r\n            ...(isDragReject ? rejectStyle : {}),\r\n        }),\r\n        [isDragActive, isDragReject, isDragAccept]\r\n    )\r\n\r\n    return (\r\n        <div className=\"uploader-container\" style={containerStyle}>\r\n            <div className='track-container' {...getRootProps({ style1 })}>\r\n                <div style={baseStyle1}>\r\n                    <input {...getInputProps()} />\r\n                    <div className=\"track-placeholder\">\r\n                        <svg\r\n                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                            viewBox=\"0 0 20 20\"\r\n                            fill=\"currentColor\"\r\n                            width={15}\r\n                            height={15}\r\n                        >\r\n                            <path\r\n                                fillRule=\"evenodd\"\r\n                                d=\"M11 11v-11h1v11h11v1h-11v11h-1v-11h-11v-1h11z\"\r\n                                clipRule=\"evenodd\"\r\n                            />\r\n                        </svg>\r\n                        <p>Add New Track</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div {...getRootProps({ style })}>\r\n                <input {...getInputProps()} />\r\n                <div className=\"uploader-placeholder\">\r\n                    <svg\r\n                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                        viewBox=\"0 0 20 20\"\r\n                        fill=\"currentColor\"\r\n                        width={25}\r\n                        height={25}\r\n                    >\r\n                        <path\r\n                            fillRule=\"evenodd\"\r\n                            d=\"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z\"\r\n                            clipRule=\"evenodd\"\r\n                        />\r\n                    </svg>\r\n                    <p>Upload Audio file</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n};\r\n","import { timelineConfig } from '../config'\r\n\r\nexport const controlsTrackStyle = {\r\n    height: timelineConfig.timelineBoxSize,\r\n    width: timelineConfig.timelineBoxSize * 3\r\n}\r\n\r\nexport const sliderTracksStyle = {\r\n    width: timelineConfig.timelineBoxSize * 2.3,\r\n    marginLeft: 10,\r\n    marginRight: 5,\r\n    marginTop: 5\r\n}\r\n\r\nexport const soloColor = '#047857'\r\nexport const muteColor = '#B45309'\r\nexport const disableColor = '#d2d2d2'","import React, { useContext, useEffect, useState } from 'react'\r\nimport { controlsTrackStyle, sliderTracksStyle, soloColor, muteColor, disableColor } from './controlsStyle'\r\nimport { PlayerContext } from '../Context/PlayerContext'\r\nimport Slider from 'rc-slider'\r\nimport 'rc-slider/assets/index.css'\r\n\r\nexport default ({ track }) => {\r\n    const [gain, setGain] = useState(track.params.gain)\r\n    const { config, setConfig } = useContext(PlayerContext)\r\n    const { tracks, setTracks } = useContext(PlayerContext)\r\n    const { pastQueue, setPastQueue } = useContext(PlayerContext)\r\n\r\n    const marks = {\r\n        '-50': '-ထ',\r\n        '-36': '-36',\r\n        '-24': '-24',\r\n        '-18': '-18',\r\n        '-12': '-12',\r\n        '-6': '-6',\r\n        0: <strong>0</strong>,\r\n        6: 6\r\n    }\r\n\r\n    const nameHandler = (event) => {\r\n        let newTrack = tracks.map((trackItem) => {\r\n            return track.id === trackItem.id ? {\r\n                ...trackItem,\r\n                name: event.target.value\r\n            }\r\n                : trackItem\r\n        })\r\n        setTracks(newTrack)\r\n    }\r\n\r\n    const gainHandler = (event) => {\r\n        getNewTrack(event.target.value)\r\n    }\r\n\r\n    const getNewTrack = (value) => {\r\n        let newTrack = tracks.map((trackItem) => {\r\n            return track.id === trackItem.id ? {\r\n                ...trackItem,\r\n                params: {\r\n                    ...track.params,\r\n                    gain: parseInt(value)\r\n                }\r\n            }\r\n                : trackItem\r\n        })\r\n        let tempTracks = [tracks];\r\n        tempTracks[0][0].type = \"tracks\"\r\n        setPastQueue([...pastQueue, ...tempTracks])\r\n        setTracks(newTrack)\r\n    }\r\n\r\n    const soloHandler = (isSoloClicked) => {\r\n        let solo = false // to check if solo is existed\r\n        let newTrack = tracks.map((trackItem) => {\r\n            if (!solo) {\r\n                solo = track.id === trackItem.id ? !trackItem.params.solo : trackItem.params.solo\r\n            }\r\n\r\n            return track.id === trackItem.id ? {\r\n                ...trackItem,\r\n                params: {\r\n                    ...track.params,\r\n                    solo: !trackItem.params.solo,\r\n                    // mute: isSoloClicked ? false : trackItem.params.mute\r\n                }\r\n            }\r\n                : trackItem\r\n        })\r\n        setTracks(newTrack)\r\n\r\n        setConfig({\r\n            ...config,\r\n            solo: solo\r\n        })\r\n\r\n    }\r\n\r\n    const muteHandler = () => {\r\n        if (config.solo && !track.params.solo) return\r\n\r\n        let solo = false\r\n        let newTrack = tracks.map((trackItem) => {\r\n            if (track.id === trackItem.id) {\r\n                solo = solo || trackItem.params.solo\r\n            }\r\n\r\n            return track.id === trackItem.id ? {\r\n                ...trackItem,\r\n                params: {\r\n                    ...track.params,\r\n                    solo: false,\r\n                    mute: track.params.solo ? true : !trackItem.params.mute\r\n                }\r\n            }\r\n                : trackItem\r\n        })\r\n        setTracks(newTrack)\r\n\r\n        setConfig({\r\n            ...config,\r\n            solo: solo\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div className=\"control-track\" style={controlsTrackStyle}>\r\n            <div className=\"track-name\">\r\n                <input type=\"text\" value={track.name} onChange={nameHandler} />\r\n            </div>\r\n            <div className=\"track-solo-mute\">\r\n                <input type=\"button\" value=\"S\" style={{ backgroundColor: track.params.solo ? soloColor : disableColor }} onClick={() => soloHandler(true)} />\r\n                <input type=\"button\" value=\"M\" style={\r\n                    {\r\n                        backgroundColor: config.solo ? (track.params.solo ? disableColor : muteColor) : (track.params.mute ? muteColor : disableColor)\r\n                    }\r\n                } onClick={muteHandler} />\r\n            </div>\r\n            <div className=\"track-gain\">\r\n                <Slider min={-50} max={6} marks={marks} step={1} defaultValue={gain} value={track.params.gain} style={sliderTracksStyle} onChange={getNewTrack} />\r\n                <input type=\"number\" value={track.params.gain} onChange={gainHandler} max={6} />\r\n            </div>\r\n        </div>\r\n    )\r\n};\r\n","import React, { useContext, useEffect } from 'react'\r\nimport { PlayerContext } from '../Context/PlayerContext'\r\nimport { updateWaveFormWidth } from '../States/States'\r\n\r\nexport default () => {\r\n    const {tracks, setTracks, config, setConfig} = useContext(PlayerContext)\r\n    const {secondsPerBox, zoomBy, maxZoom, minZoom, headIsMoving} = config\r\n\r\n    const zooms = [\r\n        {step: 2, text: '2 seconds'},\r\n        {step: 5, text: '5 seconds'},\r\n        {step: 10, text: '10 seconds'},\r\n        {step: 20, text: '20 seconds'},\r\n        {step: 30, text: '30 seconds'},\r\n        {step: 60, text: '1 minute'},\r\n        {step: 300, text: '5 minutes'},\r\n        {step: 900, text: '15 minutes'}\r\n    ]\r\n\r\n    const zoomOutHandler = () => {\r\n        setTracks(\r\n            updateWaveFormWidth(tracks, secondsPerBox + zoomBy)\r\n        )\r\n        setConfig({\r\n            ...config,\r\n            secondsPerBox: secondsPerBox + zoomBy,\r\n            headIsMoving: false,\r\n        })\r\n    }\r\n\r\n    const zoomInHandler = () => {\r\n        if ((secondsPerBox - zoomBy) >= minZoom) {\r\n            setTracks(\r\n                updateWaveFormWidth(tracks, secondsPerBox - zoomBy)\r\n            )\r\n            setConfig({\r\n                ...config,\r\n                secondsPerBox: secondsPerBox - zoomBy,\r\n                headIsMoving: false,\r\n            })\r\n        }\r\n    }\r\n\r\n    const settingHandler = () => {\r\n        if (document.getElementById('zoomSettingBar').classList.contains('display-none')) {\r\n            document.getElementById('zoomSettingBar').classList.remove('display-none')\r\n        } else {\r\n            document.getElementById('zoomSettingBar').classList.add('display-none')\r\n        }\r\n    }\r\n\r\n    const stepHandler = ($event) => {\r\n        setConfig({\r\n            ...config,\r\n            zoomBy: parseInt($event.target.value)\r\n        })\r\n    }\r\n\r\n    const snapHandler = () => {\r\n        let snap = !config.snap\r\n        setConfig({\r\n            ...config,\r\n            snap: snap\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div className=\"zoom-container\">\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\"\r\n                 width=\"20\" height=\"20\"\r\n                 className=\"snap-setting\"\r\n                 viewBox=\"0 0 24 24\" fill={config.snap ? \"currentColor\" : \"none\"}\r\n                 stroke=\"currentColor\"\r\n                 strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"\r\n                 onClick={snapHandler}\r\n            >\r\n                <path d=\"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z\"></path>\r\n            </svg>\r\n            <div className=\"zoom-setting-container\">\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\"\r\n                     width=\"20\" height=\"20\"\r\n                     className=\"zoom-setting\"\r\n                     viewBox=\"0 0 24 24\" fill=\"none\"\r\n                     stroke=\"currentColor\"\r\n                     strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"\r\n                     onClick={settingHandler}\r\n                >\r\n                    <circle cx=\"12\" cy=\"12\" r=\"3\"/>\r\n                    <path\r\n                        d=\"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83\r\n            2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1\r\n            1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65\r\n            1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65\r\n            1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65\r\n            1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83\r\n            0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1\r\n            2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2\r\n            2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0\r\n            1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z\"/>\r\n                </svg>\r\n                <div id=\"zoomSettingBar\" className=\"zoom-setting-bar display-none\">\r\n                    <ul>\r\n                        {zooms.map(zoom => (\r\n                            <li key={zoom.step}>\r\n                                <input type=\"radio\" name=\"zoomBy\" value={zoom.step} onClick={stepHandler}\r\n                                       defaultChecked={config.zoomBy === zoom.step}/>\r\n                                <span>{zoom.text}</span>\r\n                            </li>\r\n                        ))}\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n            <svg\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                className={`zoom-in ${secondsPerBox - zoomBy <= 0 ? 'disabled' : ''}`}\r\n                fill=\"none\"\r\n                viewBox=\"0 0 24 24\"\r\n                stroke=\"currentColor\"\r\n                onClick={zoomInHandler}\r\n            >\r\n                <path\r\n                    strokeLinecap=\"round\"\r\n                    strokeLinejoin=\"round\"\r\n                    strokeWidth={2}\r\n                    d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7\"\r\n                />\r\n            </svg>\r\n            <svg\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                className=\"zoom-out\"\r\n                fill=\"none\"\r\n                viewBox=\"0 0 24 24\"\r\n                stroke=\"currentColor\"\r\n                onClick={zoomOutHandler}\r\n            >\r\n                <path\r\n                    strokeLinecap=\"round\"\r\n                    strokeLinejoin=\"round\"\r\n                    strokeWidth={2}\r\n                    d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM13 10H7\"\r\n                />\r\n            </svg>\r\n\r\n        </div>\r\n    )\r\n};\r\n","import { useContext, useEffect, useState } from 'react'\r\nimport Modal from 'react-modal'\r\nimport { modalStyles } from '../config'\r\nimport PlayerState, { Track } from '../States/States'\r\nimport { PlayerContext} from '../Context/PlayerContext'\r\n\r\nexport default () => {\r\n    const {tracks, setTracks} = useContext(PlayerContext)\r\n    const [isOpen, setIsOpen] = useState(false)\r\n    const [isLoaded, setIsLoaded] = useState(false)\r\n    const [files, setFiles] = useState([])\r\n    const [error, setError] = useState(null)\r\n\r\n    // const files = [\r\n    //     PlayerState({\r\n    //         src: 'audio/guitar-1.mp3',\r\n    //         filename: 'guitar-1.mp3',\r\n    //         start_at: 40, // seconds\r\n    //         isBlob: true,\r\n    //     }),\r\n    //     PlayerState({\r\n    //         src: 'audio/drum-1.mp3',\r\n    //         filename: 'drum-1.mp3',\r\n    //         start_at: 25, // seconds\r\n    //         isBlob: true\r\n    //     }),\r\n    // ]\r\n\r\n    const openModal = () => {\r\n        setIsOpen(true)\r\n    }\r\n\r\n    const afterOpenModal = () => {\r\n\r\n    }\r\n\r\n    const closeModal = () => {\r\n        setIsOpen(false)\r\n    }\r\n\r\n    const addAudioFile = (file) => {\r\n        setTracks([...tracks, Track({audioFiles: [file]})])\r\n    }\r\n\r\n    useEffect(() => {\r\n        fetch('https://api.example.com/items')\r\n            .then(res => res.json())\r\n            .then(\r\n                (result) => {\r\n                    setIsLoaded(true)\r\n                    setFiles(result)\r\n                },\r\n                (error) => {\r\n                    setIsLoaded(true)\r\n                    setError(error)\r\n                }\r\n            )\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        Modal.setAppElement('body')\r\n    }, [])\r\n\r\n    return (\r\n        <div className=\"import-from-server\">\r\n            <input type=\"button\" value=\"Import audio from list of files on server\"\r\n                   onClick={openModal}\r\n            />\r\n            <Modal\r\n                isOpen={isOpen}\r\n                onAfterOpen={afterOpenModal}\r\n                onRequestClose={closeModal}\r\n                style={modalStyles}\r\n                contentLabel=\"Import audio from server\"\r\n            >\r\n                <h1>The list of files from server</h1>\r\n                <ul>\r\n                    {files.map((file, index) => (\r\n                        <li key={index} onClick={() => addAudioFile(file)}>\r\n                            {file.filename}\r\n                        </li>\r\n                    ))}\r\n                </ul>\r\n            </Modal>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useContext, useEffect, useRef } from 'react'\r\nimport { PlayerContext } from '../Context/PlayerContext'\r\nimport TimelineScroll from './TimelineScroll'\r\nimport Tracklines from './Tracklines'\r\nimport TimelineTracker from './TimelineTracker'\r\nimport MainPlayer from '../Controls/MainPlayer/MainPlayer'\r\nimport PlayHead from '../Controls/PlayHead'\r\nimport Uploader from '../uploader/Uploader'\r\nimport Controls from '../Controls/Controls'\r\nimport ZoomControls from '../Controls/Zoom'\r\nimport ImportFromServer from '../importer/ImportFromServer'\r\nimport { topTmpTrackerStyle } from './timelineStyle'\r\n\r\nexport default () => {\r\n    const {tracks} = useContext(PlayerContext)\r\n    const timelineScrollContainerElem = useRef()\r\n\r\n    useEffect(() => {\r\n        console.log(tracks)\r\n    })\r\n\r\n    return (\r\n        <>\r\n            <MainPlayer/>\r\n            <ZoomControls/>\r\n            <div className=\"timeline-controls-container\">\r\n                <div className=\"controls-container\">\r\n                    <div\r\n                        className=\"tmp_tracker\"\r\n                        style={topTmpTrackerStyle}\r\n                    />\r\n                    {tracks.map((track) => (\r\n                        <Controls track={track} key={track.id}/>\r\n                    ))}\r\n                </div>\r\n                <div\r\n                    className=\"timelineScrollContainer\"\r\n                    ref={timelineScrollContainerElem}\r\n                >\r\n                    <TimelineScroll>\r\n                        <TimelineTracker/>\r\n                        <PlayHead\r\n                            timelineScrollContainerElem={\r\n                                timelineScrollContainerElem\r\n                            }\r\n                        />\r\n                        <Tracklines\r\n                            timelineScrollContainerElem={\r\n                                timelineScrollContainerElem\r\n                            }\r\n                        />\r\n                    </TimelineScroll>\r\n                </div>\r\n            </div>\r\n            <Uploader/>\r\n            <ImportFromServer/>\r\n        </>\r\n    )\r\n};\r\n","import Timeline from './timeline/Timeline';\r\n\r\nexport default () => {\r\n\r\n    return (\r\n        <div className=\"timeline-container\">\r\n            <Timeline />\r\n        </div>\r\n    );\r\n};\r\n","import { PlayerContextProvider } from './Context/PlayerContext'\r\nimport TimelineDemo from './TimelineDemo'\r\nimport './App.css'\r\n\r\nwindow.WEAK_MAP = new WeakMap();\r\n\r\nfunction App() {\r\n    return (\r\n        <PlayerContextProvider>\r\n            <TimelineDemo />\r\n        </PlayerContextProvider>\r\n    )\r\n}\r\n\r\nexport default App\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n    <App />,\r\n  document.getElementById('root')\r\n);"],"sourceRoot":""}